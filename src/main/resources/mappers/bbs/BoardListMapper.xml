<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="dev.dmchoi.eomisae.mappers.bbs.IBoardListMapper">
    <delete id="deleteJoinComment"
            parameterType="dev.dmchoi.eomisae.entities.bbs.JoinCommentEntity">
        DELETE
        FROM `eomisae_comment`.`join_comments`
        WHERE `index` = #{index}
        LIMIT 1
    </delete>

    <insert id="insertArticleBuy"
            useGeneratedKeys="true"
            keyColumn="index"
            keyProperty="index"
            parameterType="dev.dmchoi.eomisae.entities.bbs.ArticleBuyEntity">
        INSERT INTO `eomisae_article`.`article_buy` (`user_index`, `board_index`, `article_index`, `checked_flag`)
        VALUES (#{userIndex}, #{boardIndex}, #{articleIndex}, #{isChecked})
    </insert>

    <insert id="insertArticleView"
            useGeneratedKeys="true"
            keyColumn="index"
            keyProperty="index"
            parameterType="dev.dmchoi.eomisae.entities.bbs.ArticleViewEntity">
        INSERT INTO `eomisae_article`.`article_view` (`user_index`, `board_index`, `article_index`, `checked_flag`)
        VALUES (#{userIndex}, #{boardIndex}, #{articleIndex}, #{isChecked})
    </insert>

    <insert id="insertArticleLike"
            useGeneratedKeys="true"
            keyColumn="index"
            keyProperty="index"
            parameterType="dev.dmchoi.eomisae.entities.bbs.ArticleLikeEntity">
        INSERT INTO `eomisae_article`.`article_like` (`user_index`, `board_index`, `article_index`, `checked_flag`)
        VALUES (#{userIndex}, #{boardIndex}, #{articleIndex}, #{isChecked})
    </insert>

    <insert id="insertArticleReport"
            useGeneratedKeys="true"
            keyColumn="index"
            keyProperty="index"
            parameterType="dev.dmchoi.eomisae.entities.bbs.ArticleReportEntity">
        INSERT INTO `eomisae_article`.`article_report` (`user_index`, `board_index`, `article_index`, `created_at`,
                                                        `checked_flag`)
        VALUES (#{userIndex}, #{boardIndex}, #{articleIndex}, #{createdAt}, #{isChecked})
    </insert>

    <insert id="insertCommentLike"
            useGeneratedKeys="true"
            keyColumn="index"
            keyProperty="index"
            parameterType="dev.dmchoi.eomisae.entities.bbs.CommentLikeEntity">
        INSERT INTO `eomisae_comment`.`comment_like` (`user_index`, `article_index`, `comment_index`, `checked_flag`)
        VALUES (#{userIndex}, #{articleIndex}, #{commentIndex}, #{isChecked})
    </insert>

    <insert id="insertCommentReport"
            useGeneratedKeys="true"
            keyColumn="index"
            keyProperty="index"
            parameterType="dev.dmchoi.eomisae.entities.bbs.CommentReportEntity">
        INSERT INTO `eomisae_comment`.`comment_report` (`user_index`, `article_index`, `comment_index`, `created_at`, `checked_flag`)
        VALUES (#{userIndex}, #{articleIndex}, #{commentIndex}, #{createdAt}, #{isChecked})
    </insert>


    <insert id="insertJoinCommentLike"
            useGeneratedKeys="true"
            keyColumn="index"
            keyProperty="index"
            parameterType="dev.dmchoi.eomisae.entities.bbs.JoinCommentLikeEntity">
        INSERT INTO `eomisae_comment`.`join_comment_like` (`user_index`, `comment_index`, `checked_flag`)
        VALUES (#{userIndex}, #{commentIndex}, #{isChecked})
    </insert>

    <select id="selectArticleBuyByUser"
            resultType="dev.dmchoi.eomisae.entities.bbs.ArticleBuyEntity"
            parameterType="dev.dmchoi.eomisae.entities.bbs.ArticleBuyEntity">
        SELECT `index`         AS `index`,
               `board_index`   AS `boardIndex`,
               `article_index` AS `articleIndex`,
               `user_index`    AS `userIndex`,
               `checked_flag`  AS `isChecked`
        FROM `eomisae_article`.`article_buy`
        WHERE `user_index` = #{userIndex}
          AND `board_index` = #{boardIndex}
          AND `article_index` = #{articleIndex}
    </select>

    <select id="selectArticleViewByUser"
            resultType="dev.dmchoi.eomisae.entities.bbs.ArticleViewEntity"
            parameterType="dev.dmchoi.eomisae.entities.bbs.ArticleViewEntity">
        SELECT `index`         AS `index`,
               `board_index`   AS `boardIndex`,
               `article_index` AS `articleIndex`,
               `user_index`    AS `userIndex`,
               `checked_flag`  AS `isChecked`
        FROM `eomisae_article`.`article_view`
        WHERE `user_index` = #{userIndex}
          AND `board_index` = #{boardIndex}
          AND `article_index` = #{articleIndex}
    </select>

    <select id="selectArticleLikeByUser"
            resultType="dev.dmchoi.eomisae.entities.bbs.ArticleLikeEntity"
            parameterType="dev.dmchoi.eomisae.entities.bbs.ArticleLikeEntity">
        SELECT `index`         AS `index`,
               `board_index`   AS `boardIndex`,
               `article_index` AS `articleIndex`,
               `user_index`    AS `userIndex`,
               `checked_flag`  AS `isChecked`
        FROM `eomisae_article`.`article_like`
        WHERE `user_index` = #{userIndex}
          AND `board_index` = #{boardIndex}
          AND `article_index` = #{articleIndex}
    </select>

    <select id="selectArticleReportByUser"
            resultType="dev.dmchoi.eomisae.entities.bbs.ArticleReportEntity"
            parameterType="dev.dmchoi.eomisae.entities.bbs.ArticleReportEntity">
        SELECT `index`         AS `index`,
               `board_index`   AS `boardIndex`,
               `article_index` AS `articleIndex`,
               `user_index`    AS `userIndex`,
               `created_at`    AS `createdAt`,
               `checked_flag`  AS `isChecked`
        FROM `eomisae_article`.`article_report`
        WHERE `user_index` = #{userIndex}
          AND `board_index` = #{boardIndex}
          AND `article_index` = #{articleIndex}
    </select>

    <select id="selectCommentLikeByUser"
            resultType="dev.dmchoi.eomisae.entities.bbs.CommentLikeEntity"
            parameterType="dev.dmchoi.eomisae.entities.bbs.CommentLikeEntity">
        SELECT `index`         AS `index`,
               `user_index`    AS `userIndex`,
               `article_index` AS `articleIndex`,
               `comment_index` AS `commentIndex`,
               `checked_flag`  AS `isChecked`
        FROM `eomisae_comment`.`comment_like`
        WHERE `user_index` = #{userIndex}
          AND `article_index` = #{articleIndex}
          AND `comment_index` = #{commentIndex}
    </select>

    <select id="selectCommentReportByUser"
            resultType="dev.dmchoi.eomisae.entities.bbs.CommentReportEntity"
            parameterType="dev.dmchoi.eomisae.entities.bbs.CommentReportEntity">
        SELECT `index`         AS `index`,
               `user_index`    AS `userIndex`,
               `article_index` AS `articleIndex`,
               `comment_index` AS `commentIndex`,
               `created_at`    AS `createdAt`,
               `checked_flag`  AS `isChecked`
        FROM `eomisae_comment`.`comment_report`
        WHERE `user_index` = #{userIndex}
          AND `article_index` = #{articleIndex}
          AND `comment_index` = #{commentIndex}
    </select>

    <select id="selectJoinCommentLikeByUser"
            resultType="dev.dmchoi.eomisae.entities.bbs.JoinCommentLikeEntity"
            parameterType="dev.dmchoi.eomisae.entities.bbs.JoinCommentLikeEntity">
        SELECT `index`         AS `index`,
               `user_index`    AS `userIndex`,
               `comment_index` AS `commentIndex`,
               `checked_flag`  AS `isChecked`
        FROM `eomisae_comment`.`join_comment_like`
        WHERE `user_index` = #{userIndex}
          AND `comment_index` = #{commentIndex}
    </select>

    <select id="selectArticle"
            resultType="dev.dmchoi.eomisae.entities.bbs.ArticleEntity">
        SELECT `index`                   AS `index`,
               `user_index`              AS `userIndex`,
               `board_index`             AS `boardIndex`,
               `board_urlName`           AS `boardUrlName`,
               `written_at`              AS `writtenAt`,
               `title`                   AS `title`,
               `tag`                     AS `tag`,
               `url`                     AS `url`,
               `discount_code`           AS `discountCode`,
               `shipping_info`           AS `shippingInfo`,
               `order_date`              AS `orderDate`,
               `shopping_mall`           AS `shoppingMall`,
               `contact`                 AS `contact`,
               `brand`                   AS `brand`,
               `product_name`            AS `productName`,
               `product_size`            AS `productSize`,
               `my_size`                 AS `mySize`,
               `exchange_size`           AS `exchangeSize`,
               `currency_for_product`    AS `currencyForProduct`,
               `product_price`           AS `productPrice`,
               `currency_for_purchasing` AS `currencyForPurchasing`,
               `purchase_product_price`  AS `purchaseProductPrice`,
               `currency_for_sailing`    AS `currencyForSailing`,
               `sale_product_price`      AS `saleProductPrice`,
               `outer`                   AS `outer`,
               `top`                     AS `top`,
               `bottom`                  AS `bottom`,
               `shoes`                   AS `shoes`,
               `acc`                     AS `acc`,
               `content`                 AS `content`,
               `view`                    AS `view`,
               `like`                    AS `like`,
               `buy`                     AS `buy`,
               `category_index`          AS `categoryIndex`,
               `gender`                  AS `gender`,
               `product_status`          AS `productStatus`,
               `trade_method`            AS `tradeMethod`,
               `blind_status`            AS `blindStatus`
        FROM `eomisae_article`.`articles`
        WHERE `board_index` = #{bid}
          AND `index` = #{aid}
    </select>

    <select id="selectComment"
            resultType="dev.dmchoi.eomisae.entities.bbs.CommentEntity">
        SELECT `index`             AS `index`,
               `article_index`     AS `articleIndex`,
               `user_index`        AS `userIndex`,
               `content`           AS `content`,
               `written_at`        AS `writtenAt`,
               `parent_index`      AS `parentIndex`,
               `parent_user_index` AS `parentUserIndex`,
               `depth`             AS `depth`,
               `like`              AS `like`,
               `deleted_flag`      AS `isDeleted`,
               `blind_status`      AS `blindStatus`
        FROM `eomisae_comment`.`comments`
        WHERE `article_index` = #{aid}
          AND `index` = #{cid}
    </select>

    <select id="selectJoinComment"
            resultType="dev.dmchoi.eomisae.entities.bbs.JoinCommentEntity">
        SELECT `index`        AS `index`,
               `board_index`  AS `boardIndex`,
               `user_index`   AS `userIndex`,
               `written_at`   AS `writtenAt`,
               `content`      AS `content`,
               `parent_index` AS `parentIndex`,
               `depth`        AS `depth`,
               `like`         AS `like`,
               `deleted_flag` AS `isDeleted`
        FROM `eomisae_comment`.`join_comments`
        WHERE `board_index` = 9
          AND `index` = #{cid}
    </select>

    <select id="selectArticleCountTotal"
            resultType="_int">
        SELECT COUNT(0)
        FROM `eomisae_article`.`articles`
    </select>

    <select id="selectArticleCountTotalByUserIndex"
            resultType="_int">
        SELECT COUNT(0)
        FROM `eomisae_article`.`articles`
        WHERE `user_index` = #{userIndex}
    </select>

    <select id="selectArticleCountTotalByBoardIndex"
            resultType="_int">
        SELECT COUNT(0)
        FROM `eomisae_article`.`articles`
        WHERE `board_index` = #{boardIndex}
    </select>

    <select id="selectCommentCountTotalByBoardIndex"
            resultType="_int">
        SELECT COUNT(0)
        FROM `eomisae_comment`.`join_comments`
        WHERE `board_index` = #{boardIndex}
    </select>

    <select id="selectArticleCountTotalByCriteria"
            resultType="_int">
        SELECT COUNT(0)
        FROM `eomisae_article`.`articles`
        WHERE (`title` LIKE CONCAT('%', #{keyword}, '%')
            OR `content` LIKE CONCAT('%', #{keyword}, '%'))
    </select>

    <select id="selectArticleCountTotalByBoardIndexAndCriteria"
            resultType="_int">
        SELECT COUNT(0)
        FROM `eomisae_article`.`articles`
        WHERE `board_index` = #{boardIndex}
          AND (`title` LIKE CONCAT('%', #{keyword}, '%')
            OR `content` LIKE CONCAT('%', #{keyword}, '%'))
    </select>

    <select id="selectArticleCountTotalByCategory"
            resultType="_int">
        SELECT COUNT(0)
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
        WHERE `category_index` = #{categoryIndex}
          AND (`title` LIKE CONCAT('%', #{keyword}, '%')
            OR `content` LIKE CONCAT('%', #{keyword}, '%'))
    </select>

    <select id="selectArticleCountTotalByBoardIndexAndCategory"
            resultType="_int">
        SELECT COUNT(0)
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
        WHERE `article`.`board_index` = #{boardIndex}
          AND `category_index` = #{categoryIndex}
          AND (`title` LIKE CONCAT('%', #{keyword}, '%')
            OR `content` LIKE CONCAT('%', #{keyword}, '%'))
    </select>

    <!--    <select id="selectPageByBoardIndex"-->
    <!--            resultType="_int">-->
    <!--        SELECT LAG(`index`, 1, 0) OVER (ORDER BY `index` ASC)  AS `prev`,-->
    <!--               LEAD(`index`, 1, 0) OVER (ORDER BY `index` ASC) AS `next`-->
    <!--        FROM `eomisae_article`.`articles`-->
    <!--        WHERE `board_index` = #{boardIndex}-->
    <!--        ORDER BY `index`-->
    <!--    </select>-->

    <select id="selectCategories"
            resultType="dev.dmchoi.eomisae.entities.bbs.CategoryEntity">
        SELECT `index`       AS `index`,
               `name`        AS `name`,
               `board_index` AS `boardIndex`
        FROM `eomisae_article`.`categories`
        ORDER BY `index`
    </select>

    <select id="getCountByTitleContentAll"
            resultType="_int">
        SELECT COUNT(0)
        FROM `eomisae_article`.`articles`
        WHERE (`title` LIKE CONCAT('%', #{keyword}, '%')
            OR `content` LIKE CONCAT('%', #{keyword}, '%'))
    </select>
    <select id="getCountByTitleAll"
            resultType="_int">
        SELECT COUNT(0)
        FROM `eomisae_article`.`articles`
        WHERE `title` LIKE CONCAT('%', #{keyword}, '%')
    </select>
    <select id="getCountByContentAll"
            resultType="_int">
        SELECT COUNT(0)
        FROM `eomisae_article`.`articles`
        WHERE `content` LIKE CONCAT('%', #{keyword}, '%')
    </select>

    <select id="getCountByCommentAll"
            resultType="_int">
        SELECT COUNT(0)
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
        WHERE `comment`.`content` LIKE CONCAT('%', #{keyword}, '%')
    </select>
    <select id="getCountByNicknameAll"
            resultType="_int">
        SELECT COUNT(0)
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
        WHERE `user`.`nickname` LIKE CONCAT('%', #{keyword}, '%')
    </select>

    <select id="getCountByTitleContent"
            resultType="_int">
        SELECT COUNT(0)
        FROM `eomisae_article`.`articles`
        WHERE `board_index` = #{boardIndex}
          AND (`title` LIKE CONCAT('%', #{keyword}, '%')
            OR `content` LIKE CONCAT('%', #{keyword}, '%'))
    </select>
    <select id="getCountByTitle"
            resultType="_int">
        SELECT COUNT(0)
        FROM `eomisae_article`.`articles`
        WHERE `board_index` = #{boardIndex}
          AND `title` LIKE CONCAT('%', #{keyword}, '%')
    </select>
    <select id="getCountByContent"
            resultType="_int">
        SELECT COUNT(0)
        FROM `eomisae_article`.`articles`
        WHERE `board_index` = #{boardIndex}
          AND `content` LIKE CONCAT('%', #{keyword}, '%')
    </select>

    <select id="getCountByComment"
            resultType="_int">
        SELECT COUNT(0)
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
        WHERE `board_index` = #{boardIndex}
          AND `comment`.`content` LIKE CONCAT('%', #{keyword}, '%')
    </select>
    <select id="getCountByNickname"
            resultType="_int">
        SELECT COUNT(0)
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
        WHERE `board_index` = #{boardIndex}
          AND `user`.`nickname` LIKE CONCAT('%', #{keyword}, '%')
    </select>

    <select id="getCommentCountByContent"
            resultType="_int">
        SELECT COUNT(0)
        FROM `eomisae_comment`.`join_comments`
        WHERE `board_index` = #{boardIndex}
          AND `content` LIKE CONCAT('%', #{keyword}, '%')
    </select>

    <select id="getCommentCountByComment"
            resultType="_int">
        SELECT COUNT(0)
        FROM `eomisae_comment`.`join_comments`
        WHERE `board_index` = #{boardIndex}
          AND `content` LIKE CONCAT('%', #{keyword}, '%')
          AND `depth` = 1
    </select>
    <select id="getCommentCountByNickname"
            resultType="_int">
        SELECT COUNT(0)
        FROM `eomisae_comment`.`join_comments` AS `comment`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON comment.user_index = user.`index`
        WHERE `board_index` = #{boardIndex}
          AND `user`.`nickname` LIKE CONCAT('%', #{keyword}, '%')
    </select>

    <select id="getCountByTitleContentAndCategoryAll"
            resultType="_int">
        SELECT COUNT(0)
        FROM `eomisae_article`.`articles`
        WHERE `category_index` = #{categoryIndex}
          AND (`title` LIKE CONCAT('%', #{keyword}, '%')
            OR `content` LIKE CONCAT('%', #{keyword}, '%'))
    </select>
    <select id="getCountByTitleAndCategoryAll"
            resultType="_int">
        SELECT COUNT(0)
        FROM `eomisae_article`.`articles`
        WHERE `category_index` = #{categoryIndex}
          AND `title` LIKE CONCAT('%', #{keyword}, '%')
    </select>
    <select id="getCountByContentAndCategoryAll"
            resultType="_int">
        SELECT COUNT(0)
        FROM `eomisae_article`.`articles`
        WHERE `category_index` = #{categoryIndex}
          AND `content` LIKE CONCAT('%', #{keyword}, '%')
    </select>

    <select id="getCountByCommentAndCategoryAll"
            resultType="_int">
        SELECT COUNT(0)
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
        WHERE `category_index` = #{categoryIndex}
          AND `comment`.`content` LIKE CONCAT('%', #{keyword}, '%')
    </select>
    <select id="getCountByNicknameAndCategoryAll"
            resultType="_int">
        SELECT COUNT(0)
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
        WHERE `category_index` = #{categoryIndex}
          AND `user`.`nickname` LIKE CONCAT('%', #{keyword}, '%')
    </select>

    <select id="getCountByTitleContentAndCategory"
            resultType="_int">
        SELECT COUNT(0)
        FROM `eomisae_article`.`articles`
        WHERE `board_index` = #{boardIndex}
          AND `category_index` = #{categoryIndex}
          AND (`title` LIKE CONCAT('%', #{keyword}, '%')
            OR `content` LIKE CONCAT('%', #{keyword}, '%'))
    </select>
    <select id="getCountByTitleAndCategory"
            resultType="_int">
        SELECT COUNT(0)
        FROM `eomisae_article`.`articles`
        WHERE `board_index` = #{boardIndex}
          AND `category_index` = #{categoryIndex}
          AND `title` LIKE CONCAT('%', #{keyword}, '%')
    </select>
    <select id="getCountByContentAndCategory"
            resultType="_int">
        SELECT COUNT(0)
        FROM `eomisae_article`.`articles`
        WHERE `board_index` = #{boardIndex}
          AND `category_index` = #{categoryIndex}
          AND `content` LIKE CONCAT('%', #{keyword}, '%')
    </select>

    <select id="getCountByCommentAndCategory"
            resultType="_int">
        SELECT COUNT(0)
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
        WHERE `board_index` = #{boardIndex}
          AND `category_index` = #{categoryIndex}
          AND `comment`.`content` LIKE CONCAT('%', #{keyword}, '%')
    </select>
    <select id="getCountByNicknameAndCategory"
            resultType="_int">
        SELECT COUNT(0)
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
        WHERE `board_index` = #{boardIndex}
          AND `category_index` = #{categoryIndex}
          AND `user`.`nickname` LIKE CONCAT('%', #{keyword}, '%')
    </select>

    <select id="selectArticlesForAll"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index`                   AS `index`,
               `article`.`user_index`              AS `userIndex`,
               `article`.`board_index`             AS `boardIndex`,
               `article`.`board_urlName`           AS `boardUrlName`,
               `article`.`written_at`              AS `writtenAt`,
               `article`.`title`                   AS `title`,
               `article`.`tag`                     AS `tag`,
               `article`.`url`                     AS `url`,
               `article`.`discount_code`           AS `discountCode`,
               `article`.`shipping_info`           AS `shippingInfo`,
               `article`.`order_date`              AS `orderDate`,
               `article`.`shopping_mall`           AS `shoppingMall`,
               `article`.`contact`                 AS `contact`,
               `article`.`brand`                   AS `brand`,
               `article`.`product_name`            AS `productName`,
               `article`.`product_size`            AS `productSize`,
               `article`.`my_size`                 AS `mySize`,
               `article`.`exchange_size`           AS `exchangeSize`,
               `article`.`currency_for_product`    AS `currencyForProduct`,
               `article`.`product_price`           AS `productPrice`,
               `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
               `article`.`purchase_product_price`  AS `purchaseProductPrice`,
               `article`.`currency_for_sailing`    AS `currencyForSailing`,
               `article`.`sale_product_price`      AS `saleProductPrice`,
               `article`.`outer`                   AS `outer`,
               `article`.`top`                     AS `top`,
               `article`.`bottom`                  AS `bottom`,
               `article`.`shoes`                   AS `shoes`,
               `article`.`acc`                     AS `acc`,
               `article`.`content`                 AS `content`,
               `article`.`view`                    AS `view`,
               `article`.`like`                    AS `like`,
               `article`.`buy`                     AS `buy`,
               `article`.`category_index`          AS `categoryIndex`,
               `article`.`gender`                  AS `gender`,
               `article`.`product_status`          AS `productStatus`,
               `article`.`trade_method`            AS `tradeMethod`,
               `article`.`blind_status`            AS `blindStatus`,
               `user`.`nickname`                   AS `userNickname`,
               `user`.`level`                      AS `level`,
               `user`.`point`                      AS `point`,
               COUNT(`comment`.`index`)            AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        GROUP BY `article`.`index`
        ORDER BY `article`.`index` DESC
    </select>

    <select id="selectNewArticlesForAll"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index`                   AS `index`,
               `article`.`user_index`              AS `userIndex`,
               `article`.`board_index`             AS `boardIndex`,
               `article`.`board_urlName`           AS `boardUrlName`,
               `article`.`written_at`              AS `writtenAt`,
               `article`.`title`                   AS `title`,
               `article`.`tag`                     AS `tag`,
               `article`.`url`                     AS `url`,
               `article`.`discount_code`           AS `discountCode`,
               `article`.`shipping_info`           AS `shippingInfo`,
               `article`.`order_date`              AS `orderDate`,
               `article`.`shopping_mall`           AS `shoppingMall`,
               `article`.`contact`                 AS `contact`,
               `article`.`brand`                   AS `brand`,
               `article`.`product_name`            AS `productName`,
               `article`.`product_size`            AS `productSize`,
               `article`.`my_size`                 AS `mySize`,
               `article`.`exchange_size`           AS `exchangeSize`,
               `article`.`currency_for_product`    AS `currencyForProduct`,
               `article`.`product_price`           AS `productPrice`,
               `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
               `article`.`purchase_product_price`  AS `purchaseProductPrice`,
               `article`.`currency_for_sailing`    AS `currencyForSailing`,
               `article`.`sale_product_price`      AS `saleProductPrice`,
               `article`.`outer`                   AS `outer`,
               `article`.`top`                     AS `top`,
               `article`.`bottom`                  AS `bottom`,
               `article`.`shoes`                   AS `shoes`,
               `article`.`acc`                     AS `acc`,
               `article`.`content`                 AS `content`,
               `article`.`view`                    AS `view`,
               `article`.`like`                    AS `like`,
               `article`.`buy`                     AS `buy`,
               `article`.`category_index`          AS `categoryIndex`,
               `article`.`gender`                  AS `gender`,
               `article`.`product_status`          AS `productStatus`,
               `article`.`trade_method`            AS `tradeMethod`,
               `article`.`blind_status`            AS `blindStatus`,
               `user`.`nickname`                   AS `userNickname`,
               `user`.`level`                      AS `level`,
               `user`.`point`                      AS `point`,
               COUNT(`comment`.`index`)            AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        GROUP BY `article`.`index`
        ORDER BY `article`.`index` DESC
        LIMIT 6
    </select>

    <select id="selectArticlesForNo"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index`                   AS `index`,
               `article`.`user_index`              AS `userIndex`,
               `article`.`board_index`             AS `boardIndex`,
               `article`.`board_urlName`           AS `boardUrlName`,
               `article`.`written_at`              AS `writtenAt`,
               `article`.`title`                   AS `title`,
               `article`.`tag`                     AS `tag`,
               `article`.`url`                     AS `url`,
               `article`.`discount_code`           AS `discountCode`,
               `article`.`shipping_info`           AS `shippingInfo`,
               `article`.`order_date`              AS `orderDate`,
               `article`.`shopping_mall`           AS `shoppingMall`,
               `article`.`contact`                 AS `contact`,
               `article`.`brand`                   AS `brand`,
               `article`.`product_name`            AS `productName`,
               `article`.`product_size`            AS `productSize`,
               `article`.`my_size`                 AS `mySize`,
               `article`.`exchange_size`           AS `exchangeSize`,
               `article`.`currency_for_product`    AS `currencyForProduct`,
               `article`.`product_price`           AS `productPrice`,
               `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
               `article`.`purchase_product_price`  AS `purchaseProductPrice`,
               `article`.`currency_for_sailing`    AS `currencyForSailing`,
               `article`.`sale_product_price`      AS `saleProductPrice`,
               `article`.`outer`                   AS `outer`,
               `article`.`top`                     AS `top`,
               `article`.`bottom`                  AS `bottom`,
               `article`.`shoes`                   AS `shoes`,
               `article`.`acc`                     AS `acc`,
               `article`.`content`                 AS `content`,
               `article`.`view`                    AS `view`,
               `article`.`like`                    AS `like`,
               `article`.`buy`                     AS `buy`,
               `article`.`category_index`          AS `categoryIndex`,
               `article`.`gender`                  AS `gender`,
               `article`.`product_status`          AS `productStatus`,
               `article`.`trade_method`            AS `tradeMethod`,
               `article`.`blind_status`            AS `blindStatus`,
               `user`.`nickname`                   AS `userNickname`,
               `user`.`level`                      AS `level`,
               `user`.`point`                      AS `point`,
               COUNT(`comment`.`index`)            AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        WHERE `article`.`board_index` = 24
        GROUP BY `article`.`index`
        ORDER BY `article`.`index` DESC
    </select>

    <select id="selectNewArticlesForNo"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index`                   AS `index`,
               `article`.`user_index`              AS `userIndex`,
               `article`.`board_index`             AS `boardIndex`,
               `article`.`board_urlName`           AS `boardUrlName`,
               `article`.`written_at`              AS `writtenAt`,
               `article`.`title`                   AS `title`,
               `article`.`tag`                     AS `tag`,
               `article`.`url`                     AS `url`,
               `article`.`discount_code`           AS `discountCode`,
               `article`.`shipping_info`           AS `shippingInfo`,
               `article`.`order_date`              AS `orderDate`,
               `article`.`shopping_mall`           AS `shoppingMall`,
               `article`.`contact`                 AS `contact`,
               `article`.`brand`                   AS `brand`,
               `article`.`product_name`            AS `productName`,
               `article`.`product_size`            AS `productSize`,
               `article`.`my_size`                 AS `mySize`,
               `article`.`exchange_size`           AS `exchangeSize`,
               `article`.`currency_for_product`    AS `currencyForProduct`,
               `article`.`product_price`           AS `productPrice`,
               `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
               `article`.`purchase_product_price`  AS `purchaseProductPrice`,
               `article`.`currency_for_sailing`    AS `currencyForSailing`,
               `article`.`sale_product_price`      AS `saleProductPrice`,
               `article`.`outer`                   AS `outer`,
               `article`.`top`                     AS `top`,
               `article`.`bottom`                  AS `bottom`,
               `article`.`shoes`                   AS `shoes`,
               `article`.`acc`                     AS `acc`,
               `article`.`content`                 AS `content`,
               `article`.`view`                    AS `view`,
               `article`.`like`                    AS `like`,
               `article`.`buy`                     AS `buy`,
               `article`.`category_index`          AS `categoryIndex`,
               `article`.`gender`                  AS `gender`,
               `article`.`product_status`          AS `productStatus`,
               `article`.`trade_method`            AS `tradeMethod`,
               `article`.`blind_status`            AS `blindStatus`,
               `user`.`nickname`                   AS `userNickname`,
               `user`.`level`                      AS `level`,
               `user`.`point`                      AS `point`,
               COUNT(`comment`.`index`)            AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        WHERE `article`.`board_index` = 24
        GROUP BY `article`.`index`
        ORDER BY `article`.`index` DESC
        LIMIT 4
    </select>

    <select id="selectNewArticlesForEv"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index`                   AS `index`,
               `article`.`user_index`              AS `userIndex`,
               `article`.`board_index`             AS `boardIndex`,
               `article`.`board_urlName`           AS `boardUrlName`,
               `article`.`written_at`              AS `writtenAt`,
               `article`.`title`                   AS `title`,
               `article`.`tag`                     AS `tag`,
               `article`.`url`                     AS `url`,
               `article`.`discount_code`           AS `discountCode`,
               `article`.`shipping_info`           AS `shippingInfo`,
               `article`.`order_date`              AS `orderDate`,
               `article`.`shopping_mall`           AS `shoppingMall`,
               `article`.`contact`                 AS `contact`,
               `article`.`brand`                   AS `brand`,
               `article`.`product_name`            AS `productName`,
               `article`.`product_size`            AS `productSize`,
               `article`.`my_size`                 AS `mySize`,
               `article`.`exchange_size`           AS `exchangeSize`,
               `article`.`currency_for_product`    AS `currencyForProduct`,
               `article`.`product_price`           AS `productPrice`,
               `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
               `article`.`purchase_product_price`  AS `purchaseProductPrice`,
               `article`.`currency_for_sailing`    AS `currencyForSailing`,
               `article`.`sale_product_price`      AS `saleProductPrice`,
               `article`.`outer`                   AS `outer`,
               `article`.`top`                     AS `top`,
               `article`.`bottom`                  AS `bottom`,
               `article`.`shoes`                   AS `shoes`,
               `article`.`acc`                     AS `acc`,
               `article`.`content`                 AS `content`,
               `article`.`view`                    AS `view`,
               `article`.`like`                    AS `like`,
               `article`.`buy`                     AS `buy`,
               `article`.`category_index`          AS `categoryIndex`,
               `article`.`gender`                  AS `gender`,
               `article`.`product_status`          AS `productStatus`,
               `article`.`trade_method`            AS `tradeMethod`,
               `article`.`blind_status`            AS `blindStatus`,
               `user`.`nickname`                   AS `userNickname`,
               `user`.`level`                      AS `level`,
               `user`.`point`                      AS `point`,
               COUNT(`comment`.`index`)            AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        WHERE `article`.`board_index` = 25
        GROUP BY `article`.`index`
        ORDER BY `article`.`index` DESC
        LIMIT 4
    </select>

    <select id="selectNewArticlesForFavorite"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index`                   AS `index`,
               `article`.`user_index`              AS `userIndex`,
               `article`.`board_index`             AS `boardIndex`,
               `article`.`board_urlName`           AS `boardUrlName`,
               `article`.`written_at`              AS `writtenAt`,
               `article`.`title`                   AS `title`,
               `article`.`tag`                     AS `tag`,
               `article`.`url`                     AS `url`,
               `article`.`discount_code`           AS `discountCode`,
               `article`.`shipping_info`           AS `shippingInfo`,
               `article`.`order_date`              AS `orderDate`,
               `article`.`shopping_mall`           AS `shoppingMall`,
               `article`.`contact`                 AS `contact`,
               `article`.`brand`                   AS `brand`,
               `article`.`product_name`            AS `productName`,
               `article`.`product_size`            AS `productSize`,
               `article`.`my_size`                 AS `mySize`,
               `article`.`exchange_size`           AS `exchangeSize`,
               `article`.`currency_for_product`    AS `currencyForProduct`,
               `article`.`product_price`           AS `productPrice`,
               `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
               `article`.`purchase_product_price`  AS `purchaseProductPrice`,
               `article`.`currency_for_sailing`    AS `currencyForSailing`,
               `article`.`sale_product_price`      AS `saleProductPrice`,
               `article`.`outer`                   AS `outer`,
               `article`.`top`                     AS `top`,
               `article`.`bottom`                  AS `bottom`,
               `article`.`shoes`                   AS `shoes`,
               `article`.`acc`                     AS `acc`,
               `article`.`content`                 AS `content`,
               `article`.`view`                    AS `view`,
               `article`.`like`                    AS `like`,
               `article`.`buy`                     AS `buy`,
               `article`.`category_index`          AS `categoryIndex`,
               `article`.`gender`                  AS `gender`,
               `article`.`product_status`          AS `productStatus`,
               `article`.`trade_method`            AS `tradeMethod`,
               `article`.`blind_status`            AS `blindStatus`,
               `user`.`nickname`                   AS `userNickname`,
               `user`.`level`                      AS `level`,
               `user`.`point`                      AS `point`,
               COUNT(`comment`.`index`)            AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
#         WHERE `article`.`written_at` > DATE_SUB(NOW(), INTERVAL 7 DAY)
        WHERE `article`.`like` > 5
        GROUP BY `article`.`index`
        ORDER BY `article`.`index` DESC
        LIMIT 7
    </select>

    <select id="selectArticlesForUserIndex"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index`                   AS `index`,
               `article`.`user_index`              AS `userIndex`,
               `article`.`board_index`             AS `boardIndex`,
               `article`.`board_urlName`           AS `boardUrlName`,
               `article`.`written_at`              AS `writtenAt`,
               `article`.`title`                   AS `title`,
               `article`.`tag`                     AS `tag`,
               `article`.`url`                     AS `url`,
               `article`.`discount_code`           AS `discountCode`,
               `article`.`shipping_info`           AS `shippingInfo`,
               `article`.`order_date`              AS `orderDate`,
               `article`.`shopping_mall`           AS `shoppingMall`,
               `article`.`contact`                 AS `contact`,
               `article`.`brand`                   AS `brand`,
               `article`.`product_name`            AS `productName`,
               `article`.`product_size`            AS `productSize`,
               `article`.`my_size`                 AS `mySize`,
               `article`.`exchange_size`           AS `exchangeSize`,
               `article`.`currency_for_product`    AS `currencyForProduct`,
               `article`.`product_price`           AS `productPrice`,
               `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
               `article`.`purchase_product_price`  AS `purchaseProductPrice`,
               `article`.`currency_for_sailing`    AS `currencyForSailing`,
               `article`.`sale_product_price`      AS `saleProductPrice`,
               `article`.`outer`                   AS `outer`,
               `article`.`top`                     AS `top`,
               `article`.`bottom`                  AS `bottom`,
               `article`.`shoes`                   AS `shoes`,
               `article`.`acc`                     AS `acc`,
               `article`.`content`                 AS `content`,
               `article`.`view`                    AS `view`,
               `article`.`like`                    AS `like`,
               `article`.`buy`                     AS `buy`,
               `article`.`category_index`          AS `categoryIndex`,
               `article`.`gender`                  AS `gender`,
               `article`.`product_status`          AS `productStatus`,
               `article`.`trade_method`            AS `tradeMethod`,
               `article`.`blind_status`            AS `blindStatus`,
               `user`.`nickname`                   AS `userNickname`,
               `user`.`level`                      AS `level`,
               `user`.`point`                      AS `point`,
               COUNT(`comment`.`index`)            AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        WHERE `user`.`index` = #{index}
        GROUP BY `article`.`index`
        ORDER BY `article`.`index` DESC
        LIMIT #{count} OFFSET #{offset}
    </select>

    <select id="selectArticlesForBoardList"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index`                   AS `index`,
               `article`.`user_index`              AS `userIndex`,
               `article`.`board_index`             AS `boardIndex`,
               `article`.`board_urlName`           AS `boardUrlName`,
               `article`.`written_at`              AS `writtenAt`,
               `article`.`title`                   AS `title`,
               `article`.`tag`                     AS `tag`,
               `article`.`url`                     AS `url`,
               `article`.`discount_code`           AS `discountCode`,
               `article`.`shipping_info`           AS `shippingInfo`,
               `article`.`order_date`              AS `orderDate`,
               `article`.`shopping_mall`           AS `shoppingMall`,
               `article`.`contact`                 AS `contact`,
               `article`.`brand`                   AS `brand`,
               `article`.`product_name`            AS `productName`,
               `article`.`product_size`            AS `productSize`,
               `article`.`my_size`                 AS `mySize`,
               `article`.`exchange_size`           AS `exchangeSize`,
               `article`.`currency_for_product`    AS `currencyForProduct`,
               `article`.`product_price`           AS `productPrice`,
               `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
               `article`.`purchase_product_price`  AS `purchaseProductPrice`,
               `article`.`currency_for_sailing`    AS `currencyForSailing`,
               `article`.`sale_product_price`      AS `saleProductPrice`,
               `article`.`outer`                   AS `outer`,
               `article`.`top`                     AS `top`,
               `article`.`bottom`                  AS `bottom`,
               `article`.`shoes`                   AS `shoes`,
               `article`.`acc`                     AS `acc`,
               `article`.`content`                 AS `content`,
               `article`.`view`                    AS `view`,
               `article`.`like`                    AS `like`,
               `article`.`buy`                     AS `buy`,
               `article`.`category_index`          AS `categoryIndex`,
               `article`.`gender`                  AS `gender`,
               `article`.`product_status`          AS `productStatus`,
               `article`.`trade_method`            AS `tradeMethod`,
               `article`.`blind_status`            AS `blindStatus`,
               `user`.`nickname`                   AS `userNickname`,
               `user`.`level`                      AS `level`,
               `user`.`point`                      AS `point`,
               COUNT(`comment`.`index`)            AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        WHERE `article`.`board_index` = #{boardIndex}
        GROUP BY `article`.`index`
        ORDER BY `article`.`index` DESC
        LIMIT #{count} OFFSET #{offset}
    </select>

    <select id="selectArticlesForBoardListAll"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index`                   AS `index`,
               `article`.`user_index`              AS `userIndex`,
               `article`.`board_index`             AS `boardIndex`,
               `article`.`board_urlName`           AS `boardUrlName`,
               `article`.`written_at`              AS `writtenAt`,
               `article`.`title`                   AS `title`,
               `article`.`tag`                     AS `tag`,
               `article`.`url`                     AS `url`,
               `article`.`discount_code`           AS `discountCode`,
               `article`.`shipping_info`           AS `shippingInfo`,
               `article`.`order_date`              AS `orderDate`,
               `article`.`shopping_mall`           AS `shoppingMall`,
               `article`.`contact`                 AS `contact`,
               `article`.`brand`                   AS `brand`,
               `article`.`product_name`            AS `productName`,
               `article`.`product_size`            AS `productSize`,
               `article`.`my_size`                 AS `mySize`,
               `article`.`exchange_size`           AS `exchangeSize`,
               `article`.`currency_for_product`    AS `currencyForProduct`,
               `article`.`product_price`           AS `productPrice`,
               `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
               `article`.`purchase_product_price`  AS `purchaseProductPrice`,
               `article`.`currency_for_sailing`    AS `currencyForSailing`,
               `article`.`sale_product_price`      AS `saleProductPrice`,
               `article`.`outer`                   AS `outer`,
               `article`.`top`                     AS `top`,
               `article`.`bottom`                  AS `bottom`,
               `article`.`shoes`                   AS `shoes`,
               `article`.`acc`                     AS `acc`,
               `article`.`content`                 AS `content`,
               `article`.`view`                    AS `view`,
               `article`.`like`                    AS `like`,
               `article`.`buy`                     AS `buy`,
               `article`.`category_index`          AS `categoryIndex`,
               `article`.`gender`                  AS `gender`,
               `article`.`product_status`          AS `productStatus`,
               `article`.`trade_method`            AS `tradeMethod`,
               `article`.`blind_status`            AS `blindStatus`,
               `user`.`nickname`                   AS `userNickname`,
               `user`.`level`                      AS `level`,
               `user`.`point`                      AS `point`,
               COUNT(`comment`.`index`)            AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        GROUP BY `article`.`index`
        ORDER BY `article`.`index` DESC
        LIMIT #{count} OFFSET #{offset}
    </select>

    <select id="selectArticlesForBoardListAllByCriteria"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index`                   AS `index`,
               `article`.`user_index`              AS `userIndex`,
               `article`.`board_index`             AS `boardIndex`,
               `article`.`board_urlName`           AS `boardUrlName`,
               `article`.`written_at`              AS `writtenAt`,
               `article`.`title`                   AS `title`,
               `article`.`tag`                     AS `tag`,
               `article`.`url`                     AS `url`,
               `article`.`discount_code`           AS `discountCode`,
               `article`.`shipping_info`           AS `shippingInfo`,
               `article`.`order_date`              AS `orderDate`,
               `article`.`shopping_mall`           AS `shoppingMall`,
               `article`.`contact`                 AS `contact`,
               `article`.`brand`                   AS `brand`,
               `article`.`product_name`            AS `productName`,
               `article`.`product_size`            AS `productSize`,
               `article`.`my_size`                 AS `mySize`,
               `article`.`exchange_size`           AS `exchangeSize`,
               `article`.`currency_for_product`    AS `currencyForProduct`,
               `article`.`product_price`           AS `productPrice`,
               `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
               `article`.`purchase_product_price`  AS `purchaseProductPrice`,
               `article`.`currency_for_sailing`    AS `currencyForSailing`,
               `article`.`sale_product_price`      AS `saleProductPrice`,
               `article`.`outer`                   AS `outer`,
               `article`.`top`                     AS `top`,
               `article`.`bottom`                  AS `bottom`,
               `article`.`shoes`                   AS `shoes`,
               `article`.`acc`                     AS `acc`,
               `article`.`content`                 AS `content`,
               `article`.`view`                    AS `view`,
               `article`.`like`                    AS `like`,
               `article`.`buy`                     AS `buy`,
               `article`.`category_index`          AS `categoryIndex`,
               `article`.`gender`                  AS `gender`,
               `article`.`product_status`          AS `productStatus`,
               `article`.`trade_method`            AS `tradeMethod`,
               `article`.`blind_status`            AS `blindStatus`,
               `user`.`nickname`                   AS `userNickname`,
               `user`.`level`                      AS `level`,
               `user`.`point`                      AS `point`,
               COUNT(`comment`.`index`)            AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        WHERE (`article`.`title` LIKE CONCAT('%', #{keyword}, '%')
            OR `article`.`content` LIKE CONCAT('%', #{keyword}, '%'))
        GROUP BY `article`.`index`
        ORDER BY `article`.`index` DESC
        LIMIT #{count} OFFSET #{offset}
    </select>

    <select id="selectArticlesForBoardListByCriteria"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index`                   AS `index`,
               `article`.`user_index`              AS `userIndex`,
               `article`.`board_index`             AS `boardIndex`,
               `article`.`board_urlName`           AS `boardUrlName`,
               `article`.`written_at`              AS `writtenAt`,
               `article`.`title`                   AS `title`,
               `article`.`tag`                     AS `tag`,
               `article`.`url`                     AS `url`,
               `article`.`discount_code`           AS `discountCode`,
               `article`.`shipping_info`           AS `shippingInfo`,
               `article`.`order_date`              AS `orderDate`,
               `article`.`shopping_mall`           AS `shoppingMall`,
               `article`.`contact`                 AS `contact`,
               `article`.`brand`                   AS `brand`,
               `article`.`product_name`            AS `productName`,
               `article`.`product_size`            AS `productSize`,
               `article`.`my_size`                 AS `mySize`,
               `article`.`exchange_size`           AS `exchangeSize`,
               `article`.`currency_for_product`    AS `currencyForProduct`,
               `article`.`product_price`           AS `productPrice`,
               `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
               `article`.`purchase_product_price`  AS `purchaseProductPrice`,
               `article`.`currency_for_sailing`    AS `currencyForSailing`,
               `article`.`sale_product_price`      AS `saleProductPrice`,
               `article`.`outer`                   AS `outer`,
               `article`.`top`                     AS `top`,
               `article`.`bottom`                  AS `bottom`,
               `article`.`shoes`                   AS `shoes`,
               `article`.`acc`                     AS `acc`,
               `article`.`content`                 AS `content`,
               `article`.`view`                    AS `view`,
               `article`.`like`                    AS `like`,
               `article`.`buy`                     AS `buy`,
               `article`.`category_index`          AS `categoryIndex`,
               `article`.`gender`                  AS `gender`,
               `article`.`product_status`          AS `productStatus`,
               `article`.`trade_method`            AS `tradeMethod`,
               `article`.`blind_status`            AS `blindStatus`,
               `user`.`nickname`                   AS `userNickname`,
               `user`.`level`                      AS `level`,
               `user`.`point`                      AS `point`,
               COUNT(`comment`.`index`)            AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        WHERE `article`.`board_index` = #{boardIndex}
          AND (`article`.`title` LIKE CONCAT('%', #{keyword}, '%')
            OR `article`.`content` LIKE CONCAT('%', #{keyword}, '%'))
        GROUP BY `article`.`index`
        ORDER BY `article`.`index` DESC
        LIMIT #{count} OFFSET #{offset}
    </select>

    <select id="selectArticlesForBoardListAllByCategory"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index`                   AS `index`,
               `article`.`user_index`              AS `userIndex`,
               `article`.`board_index`             AS `boardIndex`,
               `article`.`board_urlName`           AS `boardUrlName`,
               `article`.`written_at`              AS `writtenAt`,
               `article`.`title`                   AS `title`,
               `article`.`tag`                     AS `tag`,
               `article`.`url`                     AS `url`,
               `article`.`discount_code`           AS `discountCode`,
               `article`.`shipping_info`           AS `shippingInfo`,
               `article`.`order_date`              AS `orderDate`,
               `article`.`shopping_mall`           AS `shoppingMall`,
               `article`.`contact`                 AS `contact`,
               `article`.`brand`                   AS `brand`,
               `article`.`product_name`            AS `productName`,
               `article`.`product_size`            AS `productSize`,
               `article`.`my_size`                 AS `mySize`,
               `article`.`exchange_size`           AS `exchangeSize`,
               `article`.`currency_for_product`    AS `currencyForProduct`,
               `article`.`product_price`           AS `productPrice`,
               `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
               `article`.`purchase_product_price`  AS `purchaseProductPrice`,
               `article`.`currency_for_sailing`    AS `currencyForSailing`,
               `article`.`sale_product_price`      AS `saleProductPrice`,
               `article`.`outer`                   AS `outer`,
               `article`.`top`                     AS `top`,
               `article`.`bottom`                  AS `bottom`,
               `article`.`shoes`                   AS `shoes`,
               `article`.`acc`                     AS `acc`,
               `article`.`content`                 AS `content`,
               `article`.`view`                    AS `view`,
               `article`.`like`                    AS `like`,
               `article`.`buy`                     AS `buy`,
               `article`.`category_index`          AS `categoryIndex`,
               `article`.`gender`                  AS `gender`,
               `article`.`product_status`          AS `productStatus`,
               `article`.`trade_method`            AS `tradeMethod`,
               `article`.`blind_status`            AS `blindStatus`,
               `user`.`nickname`                   AS `userNickname`,
               `user`.`level`                      AS `level`,
               `user`.`point`                      AS `point`,
               COUNT(`comment`.`index`)            AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        WHERE `category_index` = #{categoryIndex}
          AND (`article`.`title` LIKE CONCAT('%', #{keyword}, '%')
            OR `article`.`content` LIKE CONCAT('%', #{keyword}, '%'))
        GROUP BY `article`.`index`
        ORDER BY `article`.`index` DESC
        LIMIT #{count} OFFSET #{offset}
    </select>

    <select id="selectArticlesForBoardListByCategory"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index`                   AS `index`,
               `article`.`user_index`              AS `userIndex`,
               `article`.`board_index`             AS `boardIndex`,
               `article`.`board_urlName`           AS `boardUrlName`,
               `article`.`written_at`              AS `writtenAt`,
               `article`.`title`                   AS `title`,
               `article`.`tag`                     AS `tag`,
               `article`.`url`                     AS `url`,
               `article`.`discount_code`           AS `discountCode`,
               `article`.`shipping_info`           AS `shippingInfo`,
               `article`.`order_date`              AS `orderDate`,
               `article`.`shopping_mall`           AS `shoppingMall`,
               `article`.`contact`                 AS `contact`,
               `article`.`brand`                   AS `brand`,
               `article`.`product_name`            AS `productName`,
               `article`.`product_size`            AS `productSize`,
               `article`.`my_size`                 AS `mySize`,
               `article`.`exchange_size`           AS `exchangeSize`,
               `article`.`currency_for_product`    AS `currencyForProduct`,
               `article`.`product_price`           AS `productPrice`,
               `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
               `article`.`purchase_product_price`  AS `purchaseProductPrice`,
               `article`.`currency_for_sailing`    AS `currencyForSailing`,
               `article`.`sale_product_price`      AS `saleProductPrice`,
               `article`.`outer`                   AS `outer`,
               `article`.`top`                     AS `top`,
               `article`.`bottom`                  AS `bottom`,
               `article`.`shoes`                   AS `shoes`,
               `article`.`acc`                     AS `acc`,
               `article`.`content`                 AS `content`,
               `article`.`view`                    AS `view`,
               `article`.`like`                    AS `like`,
               `article`.`buy`                     AS `buy`,
               `article`.`category_index`          AS `categoryIndex`,
               `article`.`gender`                  AS `gender`,
               `article`.`product_status`          AS `productStatus`,
               `article`.`trade_method`            AS `tradeMethod`,
               `article`.`blind_status`            AS `blindStatus`,
               `user`.`nickname`                   AS `userNickname`,
               `user`.`level`                      AS `level`,
               `user`.`point`                      AS `point`,
               COUNT(`comment`.`index`)            AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        WHERE `article`.`board_index` = #{boardIndex}
          AND `category_index` = #{categoryIndex}
          AND (`article`.`title` LIKE CONCAT('%', #{keyword}, '%')
            OR `article`.`content` LIKE CONCAT('%', #{keyword}, '%'))
        GROUP BY `article`.`index`
        ORDER BY `article`.`index` DESC
        LIMIT #{count} OFFSET #{offset}
    </select>

    <select id="searchByTitleContentAll"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index`                   AS `index`,
               `article`.`user_index`              AS `userIndex`,
               `article`.`board_index`             AS `boardIndex`,
               `article`.`board_urlName`           AS `boardUrlName`,
               `article`.`written_at`              AS `writtenAt`,
               `article`.`title`                   AS `title`,
               `article`.`tag`                     AS `tag`,
               `article`.`url`                     AS `url`,
               `article`.`discount_code`           AS `discountCode`,
               `article`.`shipping_info`           AS `shippingInfo`,
               `article`.`order_date`              AS `orderDate`,
               `article`.`shopping_mall`           AS `shoppingMall`,
               `article`.`contact`                 AS `contact`,
               `article`.`brand`                   AS `brand`,
               `article`.`product_name`            AS `productName`,
               `article`.`product_size`            AS `productSize`,
               `article`.`my_size`                 AS `mySize`,
               `article`.`exchange_size`           AS `exchangeSize`,
               `article`.`currency_for_product`    AS `currencyForProduct`,
               `article`.`product_price`           AS `productPrice`,
               `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
               `article`.`purchase_product_price`  AS `purchaseProductPrice`,
               `article`.`currency_for_sailing`    AS `currencyForSailing`,
               `article`.`sale_product_price`      AS `saleProductPrice`,
               `article`.`outer`                   AS `outer`,
               `article`.`top`                     AS `top`,
               `article`.`bottom`                  AS `bottom`,
               `article`.`shoes`                   AS `shoes`,
               `article`.`acc`                     AS `acc`,
               `article`.`content`                 AS `content`,
               `article`.`view`                    AS `view`,
               `article`.`like`                    AS `like`,
               `article`.`buy`                     AS `buy`,
               `article`.`category_index`          AS `categoryIndex`,
               `article`.`gender`                  AS `gender`,
               `article`.`product_status`          AS `productStatus`,
               `article`.`trade_method`            AS `tradeMethod`,
               `article`.`blind_status`            AS `blindStatus`,
               `user`.`nickname`                   AS `userNickname`,
               `user`.`level`                      AS `level`,
               `user`.`point`                      AS `point`,
               COUNT(`comment`.`index`)            AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        WHERE (`article`.`title` LIKE CONCAT('%', #{keyword}, '%')
            OR `article`.`content` LIKE CONCAT('%', #{keyword}, '%'))
        GROUP BY `article`.`index`
        ORDER BY `article`.`index` DESC
        LIMIT #{count} OFFSET #{offset}
    </select>
    <select id="searchByTitleAll"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index`                   AS `index`,
               `article`.`user_index`              AS `userIndex`,
               `article`.`board_index`             AS `boardIndex`,
               `article`.`board_urlName`           AS `boardUrlName`,
               `article`.`written_at`              AS `writtenAt`,
               `article`.`title`                   AS `title`,
               `article`.`tag`                     AS `tag`,
               `article`.`url`                     AS `url`,
               `article`.`discount_code`           AS `discountCode`,
               `article`.`shipping_info`           AS `shippingInfo`,
               `article`.`order_date`              AS `orderDate`,
               `article`.`shopping_mall`           AS `shoppingMall`,
               `article`.`contact`                 AS `contact`,
               `article`.`brand`                   AS `brand`,
               `article`.`product_name`            AS `productName`,
               `article`.`product_size`            AS `productSize`,
               `article`.`my_size`                 AS `mySize`,
               `article`.`exchange_size`           AS `exchangeSize`,
               `article`.`currency_for_product`    AS `currencyForProduct`,
               `article`.`product_price`           AS `productPrice`,
               `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
               `article`.`purchase_product_price`  AS `purchaseProductPrice`,
               `article`.`currency_for_sailing`    AS `currencyForSailing`,
               `article`.`sale_product_price`      AS `saleProductPrice`,
               `article`.`outer`                   AS `outer`,
               `article`.`top`                     AS `top`,
               `article`.`bottom`                  AS `bottom`,
               `article`.`shoes`                   AS `shoes`,
               `article`.`acc`                     AS `acc`,
               `article`.`content`                 AS `content`,
               `article`.`view`                    AS `view`,
               `article`.`like`                    AS `like`,
               `article`.`buy`                     AS `buy`,
               `article`.`category_index`          AS `categoryIndex`,
               `article`.`gender`                  AS `gender`,
               `article`.`product_status`          AS `productStatus`,
               `article`.`trade_method`            AS `tradeMethod`,
               `article`.`blind_status`            AS `blindStatus`,
               `user`.`nickname`                   AS `userNickname`,
               `user`.`level`                      AS `level`,
               `user`.`point`                      AS `point`,
               COUNT(`comment`.`index`)            AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        WHERE `article`.`title` LIKE CONCAT('%', #{keyword}, '%')
        GROUP BY `article`.`index`
        ORDER BY `article`.`index` DESC
        LIMIT #{count} OFFSET #{offset}
    </select>
    <select id="searchByContentAll"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index`                   AS `index`,
               `article`.`user_index`              AS `userIndex`,
               `article`.`board_index`             AS `boardIndex`,
               `article`.`board_urlName`           AS `boardUrlName`,
               `article`.`written_at`              AS `writtenAt`,
               `article`.`title`                   AS `title`,
               `article`.`tag`                     AS `tag`,
               `article`.`url`                     AS `url`,
               `article`.`discount_code`           AS `discountCode`,
               `article`.`shipping_info`           AS `shippingInfo`,
               `article`.`order_date`              AS `orderDate`,
               `article`.`shopping_mall`           AS `shoppingMall`,
               `article`.`contact`                 AS `contact`,
               `article`.`brand`                   AS `brand`,
               `article`.`product_name`            AS `productName`,
               `article`.`product_size`            AS `productSize`,
               `article`.`my_size`                 AS `mySize`,
               `article`.`exchange_size`           AS `exchangeSize`,
               `article`.`currency_for_product`    AS `currencyForProduct`,
               `article`.`product_price`           AS `productPrice`,
               `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
               `article`.`purchase_product_price`  AS `purchaseProductPrice`,
               `article`.`currency_for_sailing`    AS `currencyForSailing`,
               `article`.`sale_product_price`      AS `saleProductPrice`,
               `article`.`outer`                   AS `outer`,
               `article`.`top`                     AS `top`,
               `article`.`bottom`                  AS `bottom`,
               `article`.`shoes`                   AS `shoes`,
               `article`.`acc`                     AS `acc`,
               `article`.`content`                 AS `content`,
               `article`.`view`                    AS `view`,
               `article`.`like`                    AS `like`,
               `article`.`buy`                     AS `buy`,
               `article`.`category_index`          AS `categoryIndex`,
               `article`.`gender`                  AS `gender`,
               `article`.`product_status`          AS `productStatus`,
               `article`.`trade_method`            AS `tradeMethod`,
               `article`.`blind_status`            AS `blindStatus`,
               `user`.`nickname`                   AS `userNickname`,
               `user`.`level`                      AS `level`,
               `user`.`point`                      AS `point`,

               COUNT(`comment`.`index`)            AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        WHERE `article`.`content` LIKE CONCAT('%', #{keyword}, '%')
        GROUP BY `article`.`index`
        ORDER BY `article`.`index` DESC
        LIMIT #{count} OFFSET #{offset}
    </select>

    <select id="searchByCommentAll"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index`                   AS `index`,
               `article`.`user_index`              AS `userIndex`,
               `article`.`board_index`             AS `boardIndex`,
               `article`.`board_urlName`           AS `boardUrlName`,
               `article`.`written_at`              AS `writtenAt`,
               `article`.`title`                   AS `title`,
               `article`.`tag`                     AS `tag`,
               `article`.`url`                     AS `url`,
               `article`.`discount_code`           AS `discountCode`,
               `article`.`shipping_info`           AS `shippingInfo`,
               `article`.`order_date`              AS `orderDate`,
               `article`.`shopping_mall`           AS `shoppingMall`,
               `article`.`contact`                 AS `contact`,
               `article`.`brand`                   AS `brand`,
               `article`.`product_name`            AS `productName`,
               `article`.`product_size`            AS `productSize`,
               `article`.`my_size`                 AS `mySize`,
               `article`.`exchange_size`           AS `exchangeSize`,
               `article`.`currency_for_product`    AS `currencyForProduct`,
               `article`.`product_price`           AS `productPrice`,
               `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
               `article`.`purchase_product_price`  AS `purchaseProductPrice`,
               `article`.`currency_for_sailing`    AS `currencyForSailing`,
               `article`.`sale_product_price`      AS `saleProductPrice`,
               `article`.`outer`                   AS `outer`,
               `article`.`top`                     AS `top`,
               `article`.`bottom`                  AS `bottom`,
               `article`.`shoes`                   AS `shoes`,
               `article`.`acc`                     AS `acc`,
               `article`.`content`                 AS `content`,
               `article`.`view`                    AS `view`,
               `article`.`like`                    AS `like`,
               `article`.`buy`                     AS `buy`,
               `article`.`category_index`          AS `categoryIndex`,
               `article`.`gender`                  AS `gender`,
               `article`.`product_status`          AS `productStatus`,
               `article`.`trade_method`            AS `tradeMethod`,
               `article`.`blind_status`            AS `blindStatus`,
               `user`.`nickname`                   AS `userNickname`,
               `user`.`level`                      AS `level`,
               `user`.`point`                      AS `point`,
               COUNT(`comment`.`index`)            AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        WHERE `comment`.`content` LIKE CONCAT('%', #{keyword}, '%')
        GROUP BY `article`.`index`
        ORDER BY `article`.`index` DESC
        LIMIT #{count} OFFSET #{offset}
    </select>

    <select id="searchByNicknameAll"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index`                   AS `index`,
               `article`.`user_index`              AS `userIndex`,
               `article`.`board_index`             AS `boardIndex`,
               `article`.`board_urlName`           AS `boardUrlName`,
               `article`.`written_at`              AS `writtenAt`,
               `article`.`title`                   AS `title`,
               `article`.`tag`                     AS `tag`,
               `article`.`url`                     AS `url`,
               `article`.`discount_code`           AS `discountCode`,
               `article`.`shipping_info`           AS `shippingInfo`,
               `article`.`order_date`              AS `orderDate`,
               `article`.`shopping_mall`           AS `shoppingMall`,
               `article`.`contact`                 AS `contact`,
               `article`.`brand`                   AS `brand`,
               `article`.`product_name`            AS `productName`,
               `article`.`product_size`            AS `productSize`,
               `article`.`my_size`                 AS `mySize`,
               `article`.`exchange_size`           AS `exchangeSize`,
               `article`.`currency_for_product`    AS `currencyForProduct`,
               `article`.`product_price`           AS `productPrice`,
               `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
               `article`.`purchase_product_price`  AS `purchaseProductPrice`,
               `article`.`currency_for_sailing`    AS `currencyForSailing`,
               `article`.`sale_product_price`      AS `saleProductPrice`,
               `article`.`outer`                   AS `outer`,
               `article`.`top`                     AS `top`,
               `article`.`bottom`                  AS `bottom`,
               `article`.`shoes`                   AS `shoes`,
               `article`.`acc`                     AS `acc`,
               `article`.`content`                 AS `content`,
               `article`.`view`                    AS `view`,
               `article`.`like`                    AS `like`,
               `article`.`buy`                     AS `buy`,
               `article`.`category_index`          AS `categoryIndex`,
               `article`.`gender`                  AS `gender`,
               `article`.`product_status`          AS `productStatus`,
               `article`.`trade_method`            AS `tradeMethod`,
               `article`.`blind_status`            AS `blindStatus`,
               `user`.`nickname`                   AS `userNickname`,
               `user`.`level`                      AS `level`,
               `user`.`point`                      AS `point`,
               COUNT(`comment`.`index`)            AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        WHERE `user`.`nickname` LIKE CONCAT('%', #{keyword}, '%')
        GROUP BY `article`.`index`
        ORDER BY `article`.`index` DESC
        LIMIT #{count} OFFSET #{offset}
    </select>

    <select id="searchByTitleContent"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index`                   AS `index`,
               `article`.`user_index`              AS `userIndex`,
               `article`.`board_index`             AS `boardIndex`,
               `article`.`board_urlName`           AS `boardUrlName`,
               `article`.`written_at`              AS `writtenAt`,
               `article`.`title`                   AS `title`,
               `article`.`tag`                     AS `tag`,
               `article`.`url`                     AS `url`,
               `article`.`discount_code`           AS `discountCode`,
               `article`.`shipping_info`           AS `shippingInfo`,
               `article`.`order_date`              AS `orderDate`,
               `article`.`shopping_mall`           AS `shoppingMall`,
               `article`.`contact`                 AS `contact`,
               `article`.`brand`                   AS `brand`,
               `article`.`product_name`            AS `productName`,
               `article`.`product_size`            AS `productSize`,
               `article`.`my_size`                 AS `mySize`,
               `article`.`exchange_size`           AS `exchangeSize`,
               `article`.`currency_for_product`    AS `currencyForProduct`,
               `article`.`product_price`           AS `productPrice`,
               `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
               `article`.`purchase_product_price`  AS `purchaseProductPrice`,
               `article`.`currency_for_sailing`    AS `currencyForSailing`,
               `article`.`sale_product_price`      AS `saleProductPrice`,
               `article`.`outer`                   AS `outer`,
               `article`.`top`                     AS `top`,
               `article`.`bottom`                  AS `bottom`,
               `article`.`shoes`                   AS `shoes`,
               `article`.`acc`                     AS `acc`,
               `article`.`content`                 AS `content`,
               `article`.`view`                    AS `view`,
               `article`.`like`                    AS `like`,
               `article`.`buy`                     AS `buy`,
               `article`.`category_index`          AS `categoryIndex`,
               `article`.`gender`                  AS `gender`,
               `article`.`product_status`          AS `productStatus`,
               `article`.`trade_method`            AS `tradeMethod`,
               `article`.`blind_status`            AS `blindStatus`,
               `user`.`nickname`                   AS `userNickname`,
               `user`.`level`                      AS `level`,
               `user`.`point`                      AS `point`,
               COUNT(`comment`.`index`)            AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        WHERE `article`.`board_index` = #{boardIndex}
          AND (`article`.`title` LIKE CONCAT('%', #{keyword}, '%')
            OR `article`.`content` LIKE CONCAT('%', #{keyword}, '%'))
        GROUP BY `article`.`index`
        ORDER BY `article`.`index` DESC
        LIMIT #{count} OFFSET #{offset}
    </select>
    <select id="searchByTitle"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index`                   AS `index`,
               `article`.`user_index`              AS `userIndex`,
               `article`.`board_index`             AS `boardIndex`,
               `article`.`board_urlName`           AS `boardUrlName`,
               `article`.`written_at`              AS `writtenAt`,
               `article`.`title`                   AS `title`,
               `article`.`tag`                     AS `tag`,
               `article`.`url`                     AS `url`,
               `article`.`discount_code`           AS `discountCode`,
               `article`.`shipping_info`           AS `shippingInfo`,
               `article`.`order_date`              AS `orderDate`,
               `article`.`shopping_mall`           AS `shoppingMall`,
               `article`.`contact`                 AS `contact`,
               `article`.`brand`                   AS `brand`,
               `article`.`product_name`            AS `productName`,
               `article`.`product_size`            AS `productSize`,
               `article`.`my_size`                 AS `mySize`,
               `article`.`exchange_size`           AS `exchangeSize`,
               `article`.`currency_for_product`    AS `currencyForProduct`,
               `article`.`product_price`           AS `productPrice`,
               `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
               `article`.`purchase_product_price`  AS `purchaseProductPrice`,
               `article`.`currency_for_sailing`    AS `currencyForSailing`,
               `article`.`sale_product_price`      AS `saleProductPrice`,
               `article`.`outer`                   AS `outer`,
               `article`.`top`                     AS `top`,
               `article`.`bottom`                  AS `bottom`,
               `article`.`shoes`                   AS `shoes`,
               `article`.`acc`                     AS `acc`,
               `article`.`content`                 AS `content`,
               `article`.`view`                    AS `view`,
               `article`.`like`                    AS `like`,
               `article`.`buy`                     AS `buy`,
               `article`.`category_index`          AS `categoryIndex`,
               `article`.`gender`                  AS `gender`,
               `article`.`product_status`          AS `productStatus`,
               `article`.`trade_method`            AS `tradeMethod`,
               `article`.`blind_status`            AS `blindStatus`,
               `user`.`nickname`                   AS `userNickname`,
               `user`.`level`                      AS `level`,
               `user`.`point`                      AS `point`,
               COUNT(`comment`.`index`)            AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        WHERE `article`.`board_index` = #{boardIndex}
          AND `article`.`title` LIKE CONCAT('%', #{keyword}, '%')
        GROUP BY `article`.`index`
        ORDER BY `article`.`index` DESC
        LIMIT #{count} OFFSET #{offset}
    </select>
    <select id="searchByContent"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index`                   AS `index`,
               `article`.`user_index`              AS `userIndex`,
               `article`.`board_index`             AS `boardIndex`,
               `article`.`board_urlName`           AS `boardUrlName`,
               `article`.`written_at`              AS `writtenAt`,
               `article`.`title`                   AS `title`,
               `article`.`tag`                     AS `tag`,
               `article`.`url`                     AS `url`,
               `article`.`discount_code`           AS `discountCode`,
               `article`.`shipping_info`           AS `shippingInfo`,
               `article`.`order_date`              AS `orderDate`,
               `article`.`shopping_mall`           AS `shoppingMall`,
               `article`.`contact`                 AS `contact`,
               `article`.`brand`                   AS `brand`,
               `article`.`product_name`            AS `productName`,
               `article`.`product_size`            AS `productSize`,
               `article`.`my_size`                 AS `mySize`,
               `article`.`exchange_size`           AS `exchangeSize`,
               `article`.`currency_for_product`    AS `currencyForProduct`,
               `article`.`product_price`           AS `productPrice`,
               `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
               `article`.`purchase_product_price`  AS `purchaseProductPrice`,
               `article`.`currency_for_sailing`    AS `currencyForSailing`,
               `article`.`sale_product_price`      AS `saleProductPrice`,
               `article`.`outer`                   AS `outer`,
               `article`.`top`                     AS `top`,
               `article`.`bottom`                  AS `bottom`,
               `article`.`shoes`                   AS `shoes`,
               `article`.`acc`                     AS `acc`,
               `article`.`content`                 AS `content`,
               `article`.`view`                    AS `view`,
               `article`.`like`                    AS `like`,
               `article`.`buy`                     AS `buy`,
               `article`.`category_index`          AS `categoryIndex`,
               `article`.`gender`                  AS `gender`,
               `article`.`product_status`          AS `productStatus`,
               `article`.`trade_method`            AS `tradeMethod`,
               `article`.`blind_status`            AS `blindStatus`,
               `user`.`nickname`                   AS `userNickname`,
               `user`.`level`                      AS `level`,
               `user`.`point`                      AS `point`,

               COUNT(`comment`.`index`)            AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        WHERE `article`.`board_index` = #{boardIndex}
          AND `article`.`content` LIKE CONCAT('%', #{keyword}, '%')
        GROUP BY `article`.`index`
        ORDER BY `article`.`index` DESC
        LIMIT #{count} OFFSET #{offset}
    </select>

    <select id="searchByComment"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index`                   AS `index`,
               `article`.`user_index`              AS `userIndex`,
               `article`.`board_index`             AS `boardIndex`,
               `article`.`board_urlName`           AS `boardUrlName`,
               `article`.`written_at`              AS `writtenAt`,
               `article`.`title`                   AS `title`,
               `article`.`tag`                     AS `tag`,
               `article`.`url`                     AS `url`,
               `article`.`discount_code`           AS `discountCode`,
               `article`.`shipping_info`           AS `shippingInfo`,
               `article`.`order_date`              AS `orderDate`,
               `article`.`shopping_mall`           AS `shoppingMall`,
               `article`.`contact`                 AS `contact`,
               `article`.`brand`                   AS `brand`,
               `article`.`product_name`            AS `productName`,
               `article`.`product_size`            AS `productSize`,
               `article`.`my_size`                 AS `mySize`,
               `article`.`exchange_size`           AS `exchangeSize`,
               `article`.`currency_for_product`    AS `currencyForProduct`,
               `article`.`product_price`           AS `productPrice`,
               `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
               `article`.`purchase_product_price`  AS `purchaseProductPrice`,
               `article`.`currency_for_sailing`    AS `currencyForSailing`,
               `article`.`sale_product_price`      AS `saleProductPrice`,
               `article`.`outer`                   AS `outer`,
               `article`.`top`                     AS `top`,
               `article`.`bottom`                  AS `bottom`,
               `article`.`shoes`                   AS `shoes`,
               `article`.`acc`                     AS `acc`,
               `article`.`content`                 AS `content`,
               `article`.`view`                    AS `view`,
               `article`.`like`                    AS `like`,
               `article`.`buy`                     AS `buy`,
               `article`.`category_index`          AS `categoryIndex`,
               `article`.`gender`                  AS `gender`,
               `article`.`product_status`          AS `productStatus`,
               `article`.`trade_method`            AS `tradeMethod`,
               `article`.`blind_status`            AS `blindStatus`,
               `user`.`nickname`                   AS `userNickname`,
               `user`.`level`                      AS `level`,
               `user`.`point`                      AS `point`,
               COUNT(`comment`.`index`)            AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        WHERE `article`.`board_index` = #{boardIndex}
          AND `comment`.`content` LIKE CONCAT('%', #{keyword}, '%')
        GROUP BY `article`.`index`
        ORDER BY `article`.`index` DESC
        LIMIT #{count} OFFSET #{offset}
    </select>

    <select id="searchByNickname"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index`                   AS `index`,
               `article`.`user_index`              AS `userIndex`,
               `article`.`board_index`             AS `boardIndex`,
               `article`.`board_urlName`           AS `boardUrlName`,
               `article`.`written_at`              AS `writtenAt`,
               `article`.`title`                   AS `title`,
               `article`.`tag`                     AS `tag`,
               `article`.`url`                     AS `url`,
               `article`.`discount_code`           AS `discountCode`,
               `article`.`shipping_info`           AS `shippingInfo`,
               `article`.`order_date`              AS `orderDate`,
               `article`.`shopping_mall`           AS `shoppingMall`,
               `article`.`contact`                 AS `contact`,
               `article`.`brand`                   AS `brand`,
               `article`.`product_name`            AS `productName`,
               `article`.`product_size`            AS `productSize`,
               `article`.`my_size`                 AS `mySize`,
               `article`.`exchange_size`           AS `exchangeSize`,
               `article`.`currency_for_product`    AS `currencyForProduct`,
               `article`.`product_price`           AS `productPrice`,
               `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
               `article`.`purchase_product_price`  AS `purchaseProductPrice`,
               `article`.`currency_for_sailing`    AS `currencyForSailing`,
               `article`.`sale_product_price`      AS `saleProductPrice`,
               `article`.`outer`                   AS `outer`,
               `article`.`top`                     AS `top`,
               `article`.`bottom`                  AS `bottom`,
               `article`.`shoes`                   AS `shoes`,
               `article`.`acc`                     AS `acc`,
               `article`.`content`                 AS `content`,
               `article`.`view`                    AS `view`,
               `article`.`like`                    AS `like`,
               `article`.`buy`                     AS `buy`,
               `article`.`category_index`          AS `categoryIndex`,
               `article`.`gender`                  AS `gender`,
               `article`.`product_status`          AS `productStatus`,
               `article`.`trade_method`            AS `tradeMethod`,
               `article`.`blind_status`            AS `blindStatus`,
               `user`.`nickname`                   AS `userNickname`,
               `user`.`level`                      AS `level`,
               `user`.`point`                      AS `point`,
               COUNT(`comment`.`index`)            AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        WHERE `article`.`board_index` = #{boardIndex}
          AND `user`.`nickname` LIKE CONCAT('%', #{keyword}, '%')
        GROUP BY `article`.`index`
        ORDER BY `article`.`index` DESC
        LIMIT #{count} OFFSET #{offset}
    </select>

    <select id="searchCommentByContent"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardReadCommentDto">
        SELECT `join_comment`.`index`        AS `index`,
               `join_comment`.`board_index`  AS `boardIndex`,
               `join_comment`.`user_index`   AS `userIndex`,
               `join_comment`.`written_at`   AS `writtenAt`,
               `join_comment`.`content`      AS `content`,
               `join_comment`.`parent_index` AS `parentIndex`,
               `join_comment`.`depth`        AS `depth`,
               `join_comment`.`like`         AS `like`,
               `join_comment`.`deleted_flag` AS `isDeleted`,
               `user`.`nickname`             AS `userNickname`
        FROM `eomisae_comment`.`join_comments` AS `join_comment`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON `join_comment`.`user_index` = `user`.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `join_comment`.`board_index` = `board`.`index`
        WHERE `join_comment`.`board_index` = 9
          AND `join_comment`.`content` LIKE CONCAT('%', #{keyword}, '%')
        GROUP BY `join_comment`.`index`
        ORDER BY `join_comment`.`index` DESC
        LIMIT #{count} OFFSET #{offset}
    </select>

    <select id="searchCommentByComment"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardReadCommentDto">
        SELECT `join_comment`.`index`        AS `index`,
               `join_comment`.`board_index`  AS `boardIndex`,
               `join_comment`.`user_index`   AS `userIndex`,
               `join_comment`.`written_at`   AS `writtenAt`,
               `join_comment`.`content`      AS `content`,
               `join_comment`.`parent_index` AS `parentIndex`,
               `join_comment`.`depth`        AS `depth`,
               `join_comment`.`like`         AS `like`,
               `join_comment`.`deleted_flag` AS `isDeleted`,
               `user`.`nickname`             AS `nickname`
        FROM `eomisae_comment`.`join_comments` AS `join_comment`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON `join_comment`.`user_index` = `user`.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `join_comment`.`board_index` = `board`.`index`
        WHERE `join_comment`.`board_index` = 9
          AND `join_comment`.`content` LIKE CONCAT('%', #{keyword}, '%')
          AND `join_comment`.`depth` = 1
        GROUP BY `join_comment`.`index`
        ORDER BY `join_comment`.`index` DESC
        LIMIT #{count} OFFSET #{offset}
    </select>

    <select id="searchCommentByNickname"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardReadCommentDto">
        SELECT `join_comment`.`index`        AS `index`,
               `join_comment`.`board_index`  AS `boardIndex`,
               `join_comment`.`user_index`   AS `userIndex`,
               `join_comment`.`written_at`   AS `writtenAt`,
               `join_comment`.`content`      AS `content`,
               `join_comment`.`parent_index` AS `parentIndex`,
               `join_comment`.`depth`        AS `depth`,
               `join_comment`.`like`         AS `like`,
               `join_comment`.`deleted_flag` AS `isDeleted`,
               `user`.`nickname`             AS `nickname`
        FROM `eomisae_comment`.`join_comments` AS `join_comment`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON `join_comment`.`user_index` = `user`.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `join_comment`.`board_index` = `board`.`index`
        WHERE `join_comment`.`board_index` = 9
          AND `user`.`nickname` LIKE CONCAT('%', #{keyword}, '%')
        GROUP BY `join_comment`.`index`
        ORDER BY `join_comment`.`index` DESC
        LIMIT #{count} OFFSET #{offset}
    </select>

    <select id="searchByTitleContentAndCategoryAll"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index`          AS `index`,
               `article`.`user_index`     AS `userIndex`,
               `article`.`board_index`    AS `boardIndex`,
               `article`.`board_urlName`  AS `boardUrlName`,
               `article`.`written_at`     AS `writtenAt`,
               `article`.`title`          AS `title`,
               `article`.`tag`            AS `tag`,
               `article`.`url`            AS `url`,
               `article`.`content`        AS `content`,
               `article`.`view`           AS `view`,
               `article`.`like`           AS `like`,
               `article`.`buy`            AS `buy`,
               `article`.`category_index` AS `categoryIndex`,
               `article`.`blind_status`   AS `blindStatus`,
               `user`.`nickname`          AS `userNickname`,
               `user`.`level`             AS `level`,
               `user`.`point`             AS `point`,
               COUNT(`comment`.`index`)   AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        WHERE `category_index` = #{categoryIndex}
          AND (`article`.`title` LIKE CONCAT('%', #{keyword}, '%')
            OR `article`.`content` LIKE CONCAT('%', #{keyword}, '%'))
        GROUP BY `article`.`index`
        ORDER BY `article`.`index` DESC
        LIMIT #{count} OFFSET #{offset}
    </select>
    <select id="searchByTitleAndCategoryAll"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index`                   AS `index`,
               `article`.`user_index`              AS `userIndex`,
               `article`.`board_index`             AS `boardIndex`,
               `article`.`board_urlName`           AS `boardUrlName`,
               `article`.`written_at`              AS `writtenAt`,
               `article`.`title`                   AS `title`,
               `article`.`tag`                     AS `tag`,
               `article`.`url`                     AS `url`,
               `article`.`discount_code`           AS `discountCode`,
               `article`.`shipping_info`           AS `shippingInfo`,
               `article`.`order_date`              AS `orderDate`,
               `article`.`shopping_mall`           AS `shoppingMall`,
               `article`.`contact`                 AS `contact`,
               `article`.`brand`                   AS `brand`,
               `article`.`product_name`            AS `productName`,
               `article`.`product_size`            AS `productSize`,
               `article`.`my_size`                 AS `mySize`,
               `article`.`exchange_size`           AS `exchangeSize`,
               `article`.`currency_for_product`    AS `currencyForProduct`,
               `article`.`product_price`           AS `productPrice`,
               `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
               `article`.`purchase_product_price`  AS `purchaseProductPrice`,
               `article`.`currency_for_sailing`    AS `currencyForSailing`,
               `article`.`sale_product_price`      AS `saleProductPrice`,
               `article`.`outer`                   AS `outer`,
               `article`.`top`                     AS `top`,
               `article`.`bottom`                  AS `bottom`,
               `article`.`shoes`                   AS `shoes`,
               `article`.`acc`                     AS `acc`,
               `article`.`content`                 AS `content`,
               `article`.`view`                    AS `view`,
               `article`.`like`                    AS `like`,
               `article`.`buy`                     AS `buy`,
               `article`.`category_index`          AS `categoryIndex`,
               `article`.`gender`                  AS `gender`,
               `article`.`product_status`          AS `productStatus`,
               `article`.`trade_method`            AS `tradeMethod`,
               `article`.`blind_status`            AS `blindStatus`,
               `user`.`nickname`                   AS `userNickname`,
               `user`.`level`                      AS `level`,
               `user`.`point`                      AS `point`,
               COUNT(`comment`.`index`)            AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        WHERE `category_index` = #{categoryIndex}
          AND `article`.`title` LIKE CONCAT('%', #{keyword}, '%')
        GROUP BY `article`.`index`
        ORDER BY `article`.`index` DESC
        LIMIT #{count} OFFSET #{offset}
    </select>
    <select id="searchByContentAndCategoryAll"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index`                   AS `index`,
               `article`.`user_index`              AS `userIndex`,
               `article`.`board_index`             AS `boardIndex`,
               `article`.`board_urlName`           AS `boardUrlName`,
               `article`.`written_at`              AS `writtenAt`,
               `article`.`title`                   AS `title`,
               `article`.`tag`                     AS `tag`,
               `article`.`url`                     AS `url`,
               `article`.`discount_code`           AS `discountCode`,
               `article`.`shipping_info`           AS `shippingInfo`,
               `article`.`order_date`              AS `orderDate`,
               `article`.`shopping_mall`           AS `shoppingMall`,
               `article`.`contact`                 AS `contact`,
               `article`.`brand`                   AS `brand`,
               `article`.`product_name`            AS `productName`,
               `article`.`product_size`            AS `productSize`,
               `article`.`my_size`                 AS `mySize`,
               `article`.`exchange_size`           AS `exchangeSize`,
               `article`.`currency_for_product`    AS `currencyForProduct`,
               `article`.`product_price`           AS `productPrice`,
               `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
               `article`.`purchase_product_price`  AS `purchaseProductPrice`,
               `article`.`currency_for_sailing`    AS `currencyForSailing`,
               `article`.`sale_product_price`      AS `saleProductPrice`,
               `article`.`outer`                   AS `outer`,
               `article`.`top`                     AS `top`,
               `article`.`bottom`                  AS `bottom`,
               `article`.`shoes`                   AS `shoes`,
               `article`.`acc`                     AS `acc`,
               `article`.`content`                 AS `content`,
               `article`.`view`                    AS `view`,
               `article`.`like`                    AS `like`,
               `article`.`buy`                     AS `buy`,
               `article`.`category_index`          AS `categoryIndex`,
               `article`.`gender`                  AS `gender`,
               `article`.`product_status`          AS `productStatus`,
               `article`.`trade_method`            AS `tradeMethod`,
               `article`.`blind_status`            AS `blindStatus`,
               `user`.`nickname`                   AS `userNickname`,
               `user`.`level`                      AS `level`,
               `user`.`point`                      AS `point`,
               COUNT(`comment`.`index`)            AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        WHERE `category_index` = #{categoryIndex}
          AND `article`.`content` LIKE CONCAT('%', #{keyword}, '%')
        GROUP BY `article`.`index`
        ORDER BY `article`.`index` DESC
        LIMIT #{count} OFFSET #{offset}
    </select>

    <select id="searchByCommentAndCategoryAll"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index`                   AS `index`,
               `article`.`user_index`              AS `userIndex`,
               `article`.`board_index`             AS `boardIndex`,
               `article`.`board_urlName`           AS `boardUrlName`,
               `article`.`written_at`              AS `writtenAt`,
               `article`.`title`                   AS `title`,
               `article`.`tag`                     AS `tag`,
               `article`.`url`                     AS `url`,
               `article`.`discount_code`           AS `discountCode`,
               `article`.`shipping_info`           AS `shippingInfo`,
               `article`.`order_date`              AS `orderDate`,
               `article`.`shopping_mall`           AS `shoppingMall`,
               `article`.`contact`                 AS `contact`,
               `article`.`brand`                   AS `brand`,
               `article`.`product_name`            AS `productName`,
               `article`.`product_size`            AS `productSize`,
               `article`.`my_size`                 AS `mySize`,
               `article`.`exchange_size`           AS `exchangeSize`,
               `article`.`currency_for_product`    AS `currencyForProduct`,
               `article`.`product_price`           AS `productPrice`,
               `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
               `article`.`purchase_product_price`  AS `purchaseProductPrice`,
               `article`.`currency_for_sailing`    AS `currencyForSailing`,
               `article`.`sale_product_price`      AS `saleProductPrice`,
               `article`.`outer`                   AS `outer`,
               `article`.`top`                     AS `top`,
               `article`.`bottom`                  AS `bottom`,
               `article`.`shoes`                   AS `shoes`,
               `article`.`acc`                     AS `acc`,
               `article`.`content`                 AS `content`,
               `article`.`view`                    AS `view`,
               `article`.`like`                    AS `like`,
               `article`.`buy`                     AS `buy`,
               `article`.`category_index`          AS `categoryIndex`,
               `article`.`gender`                  AS `gender`,
               `article`.`product_status`          AS `productStatus`,
               `article`.`trade_method`            AS `tradeMethod`,
               `article`.`blind_status`            AS `blindStatus`,
               `user`.`nickname`                   AS `userNickname`,
               `user`.`level`                      AS `level`,
               `user`.`point`                      AS `point`,
               COUNT(`comment`.`index`)            AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        WHERE `category_index` = #{categoryIndex}
          AND `comment`.`content` LIKE CONCAT('%', #{keyword}, '%')
        GROUP BY `article`.`index`
        ORDER BY `article`.`index` DESC
        LIMIT #{count} OFFSET #{offset}
    </select>

    <select id="searchByNicknameAndCategoryAll"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index`                   AS `index`,
               `article`.`user_index`              AS `userIndex`,
               `article`.`board_index`             AS `boardIndex`,
               `article`.`board_urlName`           AS `boardUrlName`,
               `article`.`written_at`              AS `writtenAt`,
               `article`.`title`                   AS `title`,
               `article`.`tag`                     AS `tag`,
               `article`.`url`                     AS `url`,
               `article`.`discount_code`           AS `discountCode`,
               `article`.`shipping_info`           AS `shippingInfo`,
               `article`.`order_date`              AS `orderDate`,
               `article`.`shopping_mall`           AS `shoppingMall`,
               `article`.`contact`                 AS `contact`,
               `article`.`brand`                   AS `brand`,
               `article`.`product_name`            AS `productName`,
               `article`.`product_size`            AS `productSize`,
               `article`.`my_size`                 AS `mySize`,
               `article`.`exchange_size`           AS `exchangeSize`,
               `article`.`currency_for_product`    AS `currencyForProduct`,
               `article`.`product_price`           AS `productPrice`,
               `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
               `article`.`purchase_product_price`  AS `purchaseProductPrice`,
               `article`.`currency_for_sailing`    AS `currencyForSailing`,
               `article`.`sale_product_price`      AS `saleProductPrice`,
               `article`.`outer`                   AS `outer`,
               `article`.`top`                     AS `top`,
               `article`.`bottom`                  AS `bottom`,
               `article`.`shoes`                   AS `shoes`,
               `article`.`acc`                     AS `acc`,
               `article`.`content`                 AS `content`,
               `article`.`view`                    AS `view`,
               `article`.`like`                    AS `like`,
               `article`.`buy`                     AS `buy`,
               `article`.`category_index`          AS `categoryIndex`,
               `article`.`gender`                  AS `gender`,
               `article`.`product_status`          AS `productStatus`,
               `article`.`trade_method`            AS `tradeMethod`,
               `article`.`blind_status`            AS `blindStatus`,
               `user`.`nickname`                   AS `userNickname`,
               `user`.`level`                      AS `level`,
               `user`.`point`                      AS `point`,
               COUNT(`comment`.`index`)            AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        WHERE `category_index` = #{categoryIndex}
          AND `user`.`nickname` LIKE CONCAT('%', #{keyword}, '%')
        GROUP BY `article`.`index`
        ORDER BY `article`.`index` DESC
        LIMIT #{count} OFFSET #{offset}
    </select>

    <select id="searchByTitleContentAndCategory"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index`                   AS `index`,
               `article`.`user_index`              AS `userIndex`,
               `article`.`board_index`             AS `boardIndex`,
               `article`.`board_urlName`           AS `boardUrlName`,
               `article`.`written_at`              AS `writtenAt`,
               `article`.`title`                   AS `title`,
               `article`.`tag`                     AS `tag`,
               `article`.`url`                     AS `url`,
               `article`.`discount_code`           AS `discountCode`,
               `article`.`shipping_info`           AS `shippingInfo`,
               `article`.`order_date`              AS `orderDate`,
               `article`.`shopping_mall`           AS `shoppingMall`,
               `article`.`contact`                 AS `contact`,
               `article`.`brand`                   AS `brand`,
               `article`.`product_name`            AS `productName`,
               `article`.`product_size`            AS `productSize`,
               `article`.`my_size`                 AS `mySize`,
               `article`.`exchange_size`           AS `exchangeSize`,
               `article`.`currency_for_product`    AS `currencyForProduct`,
               `article`.`product_price`           AS `productPrice`,
               `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
               `article`.`purchase_product_price`  AS `purchaseProductPrice`,
               `article`.`currency_for_sailing`    AS `currencyForSailing`,
               `article`.`sale_product_price`      AS `saleProductPrice`,
               `article`.`outer`                   AS `outer`,
               `article`.`top`                     AS `top`,
               `article`.`bottom`                  AS `bottom`,
               `article`.`shoes`                   AS `shoes`,
               `article`.`acc`                     AS `acc`,
               `article`.`content`                 AS `content`,
               `article`.`view`                    AS `view`,
               `article`.`like`                    AS `like`,
               `article`.`buy`                     AS `buy`,
               `article`.`category_index`          AS `categoryIndex`,
               `article`.`gender`                  AS `gender`,
               `article`.`product_status`          AS `productStatus`,
               `article`.`trade_method`            AS `tradeMethod`,
               `article`.`blind_status`            AS `blindStatus`,
               `user`.`nickname`                   AS `userNickname`,
               `user`.`level`                      AS `level`,
               `user`.`point`                      AS `point`,
               COUNT(`comment`.`index`)            AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        WHERE `article`.`board_index` = #{boardIndex}
          AND `category_index` = #{categoryIndex}
          AND (`article`.`title` LIKE CONCAT('%', #{keyword}, '%')
            OR `article`.`content` LIKE CONCAT('%', #{keyword}, '%'))
        GROUP BY `article`.`index`
        ORDER BY `article`.`index` DESC
        LIMIT #{count} OFFSET #{offset}
    </select>
    <select id="searchByTitleAndCategory"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index`                   AS `index`,
               `article`.`user_index`              AS `userIndex`,
               `article`.`board_index`             AS `boardIndex`,
               `article`.`board_urlName`           AS `boardUrlName`,
               `article`.`written_at`              AS `writtenAt`,
               `article`.`title`                   AS `title`,
               `article`.`tag`                     AS `tag`,
               `article`.`url`                     AS `url`,
               `article`.`discount_code`           AS `discountCode`,
               `article`.`shipping_info`           AS `shippingInfo`,
               `article`.`order_date`              AS `orderDate`,
               `article`.`shopping_mall`           AS `shoppingMall`,
               `article`.`contact`                 AS `contact`,
               `article`.`brand`                   AS `brand`,
               `article`.`product_name`            AS `productName`,
               `article`.`product_size`            AS `productSize`,
               `article`.`my_size`                 AS `mySize`,
               `article`.`exchange_size`           AS `exchangeSize`,
               `article`.`currency_for_product`    AS `currencyForProduct`,
               `article`.`product_price`           AS `productPrice`,
               `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
               `article`.`purchase_product_price`  AS `purchaseProductPrice`,
               `article`.`currency_for_sailing`    AS `currencyForSailing`,
               `article`.`sale_product_price`      AS `saleProductPrice`,
               `article`.`outer`                   AS `outer`,
               `article`.`top`                     AS `top`,
               `article`.`bottom`                  AS `bottom`,
               `article`.`shoes`                   AS `shoes`,
               `article`.`acc`                     AS `acc`,
               `article`.`content`                 AS `content`,
               `article`.`view`                    AS `view`,
               `article`.`like`                    AS `like`,
               `article`.`buy`                     AS `buy`,
               `article`.`category_index`          AS `categoryIndex`,
               `article`.`gender`                  AS `gender`,
               `article`.`product_status`          AS `productStatus`,
               `article`.`trade_method`            AS `tradeMethod`,
               `article`.`blind_status`            AS `blindStatus`,
               `user`.`nickname`                   AS `userNickname`,
               `user`.`level`                      AS `level`,
               `user`.`point`                      AS `point`,
               COUNT(`comment`.`index`)            AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        WHERE `article`.`board_index` = #{boardIndex}
          AND `category_index` = #{categoryIndex}
          AND `article`.`title` LIKE CONCAT('%', #{keyword}, '%')
        GROUP BY `article`.`index`
        ORDER BY `article`.`index` DESC
        LIMIT #{count} OFFSET #{offset}
    </select>
    <select id="searchByContentAndCategory"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index`                   AS `index`,
               `article`.`user_index`              AS `userIndex`,
               `article`.`board_index`             AS `boardIndex`,
               `article`.`board_urlName`           AS `boardUrlName`,
               `article`.`written_at`              AS `writtenAt`,
               `article`.`title`                   AS `title`,
               `article`.`tag`                     AS `tag`,
               `article`.`url`                     AS `url`,
               `article`.`discount_code`           AS `discountCode`,
               `article`.`shipping_info`           AS `shippingInfo`,
               `article`.`order_date`              AS `orderDate`,
               `article`.`shopping_mall`           AS `shoppingMall`,
               `article`.`contact`                 AS `contact`,
               `article`.`brand`                   AS `brand`,
               `article`.`product_name`            AS `productName`,
               `article`.`product_size`            AS `productSize`,
               `article`.`my_size`                 AS `mySize`,
               `article`.`exchange_size`           AS `exchangeSize`,
               `article`.`currency_for_product`    AS `currencyForProduct`,
               `article`.`product_price`           AS `productPrice`,
               `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
               `article`.`purchase_product_price`  AS `purchaseProductPrice`,
               `article`.`currency_for_sailing`    AS `currencyForSailing`,
               `article`.`sale_product_price`      AS `saleProductPrice`,
               `article`.`outer`                   AS `outer`,
               `article`.`top`                     AS `top`,
               `article`.`bottom`                  AS `bottom`,
               `article`.`shoes`                   AS `shoes`,
               `article`.`acc`                     AS `acc`,
               `article`.`content`                 AS `content`,
               `article`.`view`                    AS `view`,
               `article`.`like`                    AS `like`,
               `article`.`buy`                     AS `buy`,
               `article`.`category_index`          AS `categoryIndex`,
               `article`.`gender`                  AS `gender`,
               `article`.`product_status`          AS `productStatus`,
               `article`.`trade_method`            AS `tradeMethod`,
               `article`.`blind_status`            AS `blindStatus`,
               `user`.`nickname`                   AS `userNickname`,
               `user`.`level`                      AS `level`,
               `user`.`point`                      AS `point`,
               COUNT(`comment`.`index`)            AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        WHERE `article`.`board_index` = #{boardIndex}
          AND `category_index` = #{categoryIndex}
          AND `article`.`content` LIKE CONCAT('%', #{keyword}, '%')
        GROUP BY `article`.`index`
        ORDER BY `article`.`index` DESC
        LIMIT #{count} OFFSET #{offset}
    </select>

    <select id="searchByCommentAndCategory"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index`                   AS `index`,
               `article`.`user_index`              AS `userIndex`,
               `article`.`board_index`             AS `boardIndex`,
               `article`.`board_urlName`           AS `boardUrlName`,
               `article`.`written_at`              AS `writtenAt`,
               `article`.`title`                   AS `title`,
               `article`.`tag`                     AS `tag`,
               `article`.`url`                     AS `url`,
               `article`.`discount_code`           AS `discountCode`,
               `article`.`shipping_info`           AS `shippingInfo`,
               `article`.`order_date`              AS `orderDate`,
               `article`.`shopping_mall`           AS `shoppingMall`,
               `article`.`contact`                 AS `contact`,
               `article`.`brand`                   AS `brand`,
               `article`.`product_name`            AS `productName`,
               `article`.`product_size`            AS `productSize`,
               `article`.`my_size`                 AS `mySize`,
               `article`.`exchange_size`           AS `exchangeSize`,
               `article`.`currency_for_product`    AS `currencyForProduct`,
               `article`.`product_price`           AS `productPrice`,
               `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
               `article`.`purchase_product_price`  AS `purchaseProductPrice`,
               `article`.`currency_for_sailing`    AS `currencyForSailing`,
               `article`.`sale_product_price`      AS `saleProductPrice`,
               `article`.`outer`                   AS `outer`,
               `article`.`top`                     AS `top`,
               `article`.`bottom`                  AS `bottom`,
               `article`.`shoes`                   AS `shoes`,
               `article`.`acc`                     AS `acc`,
               `article`.`content`                 AS `content`,
               `article`.`view`                    AS `view`,
               `article`.`like`                    AS `like`,
               `article`.`buy`                     AS `buy`,
               `article`.`category_index`          AS `categoryIndex`,
               `article`.`gender`                  AS `gender`,
               `article`.`product_status`          AS `productStatus`,
               `article`.`trade_method`            AS `tradeMethod`,
               `article`.`blind_status`            AS `blindStatus`,
               `user`.`nickname`                   AS `userNickname`,
               `user`.`level`                      AS `level`,
               `user`.`point`                      AS `point`,
               COUNT(`comment`.`index`)            AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        WHERE `article`.`board_index` = #{boardIndex}
          AND `category_index` = #{categoryIndex}
          AND `comment`.`content` LIKE CONCAT('%', #{keyword}, '%')
        GROUP BY `article`.`index`
        ORDER BY `article`.`index` DESC
        LIMIT #{count} OFFSET #{offset}
    </select>

    <select id="searchByNicknameAndCategory"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index`                   AS `index`,
               `article`.`user_index`              AS `userIndex`,
               `article`.`board_index`             AS `boardIndex`,
               `article`.`board_urlName`           AS `boardUrlName`,
               `article`.`written_at`              AS `writtenAt`,
               `article`.`title`                   AS `title`,
               `article`.`tag`                     AS `tag`,
               `article`.`url`                     AS `url`,
               `article`.`discount_code`           AS `discountCode`,
               `article`.`shipping_info`           AS `shippingInfo`,
               `article`.`order_date`              AS `orderDate`,
               `article`.`shopping_mall`           AS `shoppingMall`,
               `article`.`contact`                 AS `contact`,
               `article`.`brand`                   AS `brand`,
               `article`.`product_name`            AS `productName`,
               `article`.`product_size`            AS `productSize`,
               `article`.`my_size`                 AS `mySize`,
               `article`.`exchange_size`           AS `exchangeSize`,
               `article`.`currency_for_product`    AS `currencyForProduct`,
               `article`.`product_price`           AS `productPrice`,
               `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
               `article`.`purchase_product_price`  AS `purchaseProductPrice`,
               `article`.`currency_for_sailing`    AS `currencyForSailing`,
               `article`.`sale_product_price`      AS `saleProductPrice`,
               `article`.`outer`                   AS `outer`,
               `article`.`top`                     AS `top`,
               `article`.`bottom`                  AS `bottom`,
               `article`.`shoes`                   AS `shoes`,
               `article`.`acc`                     AS `acc`,
               `article`.`content`                 AS `content`,
               `article`.`view`                    AS `view`,
               `article`.`like`                    AS `like`,
               `article`.`buy`                     AS `buy`,
               `article`.`category_index`          AS `categoryIndex`,
               `article`.`gender`                  AS `gender`,
               `article`.`product_status`          AS `productStatus`,
               `article`.`trade_method`            AS `tradeMethod`,
               `article`.`blind_status`            AS `blindStatus`,
               `user`.`nickname`                   AS `userNickname`,
               `user`.`level`                      AS `level`,
               `user`.`point`                      AS `point`,
               COUNT(`comment`.`index`)            AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
                 LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
                 LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        WHERE `article`.`board_index` = #{boardIndex}
          AND `category_index` = #{categoryIndex}
          AND `user`.`nickname` LIKE CONCAT('%', #{keyword}, '%')
        GROUP BY `article`.`index`
        ORDER BY `article`.`index` DESC
        LIMIT #{count} OFFSET #{offset}
    </select>

    <select id="searchByTitleContentAndAlignment"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index` AS `index`,
        `article`.`user_index` AS `userIndex`,
        `article`.`board_index` AS `boardIndex`,
        `article`.`board_urlName` AS `boardUrlName`,
        `article`.`written_at` AS `writtenAt`,
        `article`.`title` AS `title`,
        `article`.`tag` AS `tag`,
        `article`.`url` AS `url`,
        `article`.`discount_code` AS `discountCode`,
        `article`.`shipping_info` AS `shippingInfo`,
        `article`.`order_date` AS `orderDate`,
        `article`.`shopping_mall` AS `shoppingMall`,
        `article`.`contact` AS `contact`,
        `article`.`brand` AS `brand`,
        `article`.`product_name` AS `productName`,
        `article`.`product_size` AS `productSize`,
        `article`.`my_size` AS `mySize`,
        `article`.`exchange_size` AS `exchangeSize`,
        `article`.`currency_for_product` AS `currencyForProduct`,
        `article`.`product_price` AS `productPrice`,
        `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
        `article`.`purchase_product_price` AS `purchaseProductPrice`,
        `article`.`currency_for_sailing` AS `currencyForSailing`,
        `article`.`sale_product_price` AS `saleProductPrice`,
        `article`.`outer` AS `outer`,
        `article`.`top` AS `top`,
        `article`.`bottom` AS `bottom`,
        `article`.`shoes` AS `shoes`,
        `article`.`acc` AS `acc`,
        `article`.`content` AS `content`,
        `article`.`view` AS `view`,
        `article`.`like` AS `like`,
        `article`.`buy` AS `buy`,
        `article`.`category_index` AS `categoryIndex`,
        `article`.`gender` AS `gender`,
        `article`.`product_status` AS `productStatus`,
        `article`.`trade_method` AS `tradeMethod`,
        `article`.`blind_status` AS `blindStatus`,
        `user`.`nickname` AS `userNickname`,
        `user`.`level` AS `level`,
        `user`.`point` AS `point`,
        COUNT(`comment`.`index`) AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
        LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
        LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
        LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
        LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        WHERE `article`.`board_index` = #{boardIndex}
        AND (`article`.`title` LIKE CONCAT('%', #{keyword}, '%')
        OR `article`.`content` LIKE CONCAT('%', #{keyword}, '%'))
        GROUP BY `article`.`index`
        <choose>
            <when test="alignment == 1">
                ORDER BY `article`.`index`
            </when>
            <when test="alignment == 2">
                ORDER BY `article`.`view`
            </when>
            <when test="alignment == 3">
                ORDER BY `article`.`like`
            </when>
            <when test="alignment == 4">
                ORDER BY `commentCount`
            </when>
            <otherwise>
                ORDER BY `article`.`index`
            </otherwise>
        </choose>
        LIMIT #{count} OFFSET #{offset}
    </select>
    <select id="searchByTitleAndAlignment"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index` AS `index`,
        `article`.`user_index` AS `userIndex`,
        `article`.`board_index` AS `boardIndex`,
        `article`.`board_urlName` AS `boardUrlName`,
        `article`.`written_at` AS `writtenAt`,
        `article`.`title` AS `title`,
        `article`.`tag` AS `tag`,
        `article`.`url` AS `url`,
        `article`.`discount_code` AS `discountCode`,
        `article`.`shipping_info` AS `shippingInfo`,
        `article`.`order_date` AS `orderDate`,
        `article`.`shopping_mall` AS `shoppingMall`,
        `article`.`contact` AS `contact`,
        `article`.`brand` AS `brand`,
        `article`.`product_name` AS `productName`,
        `article`.`product_size` AS `productSize`,
        `article`.`my_size` AS `mySize`,
        `article`.`exchange_size` AS `exchangeSize`,
        `article`.`currency_for_product` AS `currencyForProduct`,
        `article`.`product_price` AS `productPrice`,
        `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
        `article`.`purchase_product_price` AS `purchaseProductPrice`,
        `article`.`currency_for_sailing` AS `currencyForSailing`,
        `article`.`sale_product_price` AS `saleProductPrice`,
        `article`.`outer` AS `outer`,
        `article`.`top` AS `top`,
        `article`.`bottom` AS `bottom`,
        `article`.`shoes` AS `shoes`,
        `article`.`acc` AS `acc`,
        `article`.`content` AS `content`,
        `article`.`view` AS `view`,
        `article`.`like` AS `like`,
        `article`.`buy` AS `buy`,
        `article`.`category_index` AS `categoryIndex`,
        `article`.`gender` AS `gender`,
        `article`.`product_status` AS `productStatus`,
        `article`.`trade_method` AS `tradeMethod`,
        `article`.`blind_status` AS `blindStatus`,
        `user`.`nickname` AS `userNickname`,
        `user`.`level` AS `level`,
        `user`.`point` AS `point`,
        COUNT(`comment`.`index`) AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
        LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
        LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
        LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
        LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        WHERE `article`.`board_index` = #{boardIndex}
        AND `article`.`title` LIKE CONCAT('%', #{keyword}, '%')
        <choose>
            <when test="alignment == 1">
                GROUP BY `article`.`index`
                ORDER BY `article`.`index`
            </when>
            <when test="alignment == 2">
                GROUP BY `article`.`index`
                ORDER BY `article`.`view`
            </when>
            <when test="alignment == 3">
                GROUP BY `article`.`index`
                ORDER BY `article`.`like`
            </when>
            <when test="alignment == 4">
                GROUP BY `article`.`index`
                ORDER BY `commentCount`
            </when>
        </choose>
        LIMIT #{count} OFFSET #{offset}
    </select>
    <select id="searchByContentAndAlignment"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index` AS `index`,
        `article`.`user_index` AS `userIndex`,
        `article`.`board_index` AS `boardIndex`,
        `article`.`board_urlName` AS `boardUrlName`,
        `article`.`written_at` AS `writtenAt`,
        `article`.`title` AS `title`,
        `article`.`tag` AS `tag`,
        `article`.`url` AS `url`,
        `article`.`discount_code` AS `discountCode`,
        `article`.`shipping_info` AS `shippingInfo`,
        `article`.`order_date` AS `orderDate`,
        `article`.`shopping_mall` AS `shoppingMall`,
        `article`.`contact` AS `contact`,
        `article`.`brand` AS `brand`,
        `article`.`product_name` AS `productName`,
        `article`.`product_size` AS `productSize`,
        `article`.`my_size` AS `mySize`,
        `article`.`exchange_size` AS `exchangeSize`,
        `article`.`currency_for_product` AS `currencyForProduct`,
        `article`.`product_price` AS `productPrice`,
        `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
        `article`.`purchase_product_price` AS `purchaseProductPrice`,
        `article`.`currency_for_sailing` AS `currencyForSailing`,
        `article`.`sale_product_price` AS `saleProductPrice`,
        `article`.`outer` AS `outer`,
        `article`.`top` AS `top`,
        `article`.`bottom` AS `bottom`,
        `article`.`shoes` AS `shoes`,
        `article`.`acc` AS `acc`,
        `article`.`content` AS `content`,
        `article`.`view` AS `view`,
        `article`.`like` AS `like`,
        `article`.`buy` AS `buy`,
        `article`.`category_index` AS `categoryIndex`,
        `article`.`gender` AS `gender`,
        `article`.`product_status` AS `productStatus`,
        `article`.`trade_method` AS `tradeMethod`,
        `article`.`blind_status` AS `blindStatus`,
        `user`.`nickname` AS `userNickname`,
        `user`.`level` AS `level`,
        `user`.`point` AS `point`,

        COUNT(`comment`.`index`) AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
        LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
        LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
        LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
        LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        WHERE `article`.`board_index` = #{boardIndex}
        AND `article`.`content` LIKE CONCAT('%', #{keyword}, '%')
        <choose>
            <when test="alignment == 1">
                GROUP BY `article`.`index`
                ORDER BY `article`.`index`
            </when>
            <when test="alignment == 2">
                GROUP BY `article`.`index`
                ORDER BY `article`.`view`
            </when>
            <when test="alignment == 3">
                GROUP BY `article`.`index`
                ORDER BY `article`.`like`
            </when>
            <when test="alignment == 4">
                GROUP BY `article`.`index`
                ORDER BY `commentCount`
            </when>
        </choose>
        LIMIT #{count} OFFSET #{offset}
    </select>

    <select id="searchByCommentAndAlignment"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index` AS `index`,
        `article`.`user_index` AS `userIndex`,
        `article`.`board_index` AS `boardIndex`,
        `article`.`board_urlName` AS `boardUrlName`,
        `article`.`written_at` AS `writtenAt`,
        `article`.`title` AS `title`,
        `article`.`tag` AS `tag`,
        `article`.`url` AS `url`,
        `article`.`discount_code` AS `discountCode`,
        `article`.`shipping_info` AS `shippingInfo`,
        `article`.`order_date` AS `orderDate`,
        `article`.`shopping_mall` AS `shoppingMall`,
        `article`.`contact` AS `contact`,
        `article`.`brand` AS `brand`,
        `article`.`product_name` AS `productName`,
        `article`.`product_size` AS `productSize`,
        `article`.`my_size` AS `mySize`,
        `article`.`exchange_size` AS `exchangeSize`,
        `article`.`currency_for_product` AS `currencyForProduct`,
        `article`.`product_price` AS `productPrice`,
        `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
        `article`.`purchase_product_price` AS `purchaseProductPrice`,
        `article`.`currency_for_sailing` AS `currencyForSailing`,
        `article`.`sale_product_price` AS `saleProductPrice`,
        `article`.`outer` AS `outer`,
        `article`.`top` AS `top`,
        `article`.`bottom` AS `bottom`,
        `article`.`shoes` AS `shoes`,
        `article`.`acc` AS `acc`,
        `article`.`content` AS `content`,
        `article`.`view` AS `view`,
        `article`.`like` AS `like`,
        `article`.`buy` AS `buy`,
        `article`.`category_index` AS `categoryIndex`,
        `article`.`gender` AS `gender`,
        `article`.`product_status` AS `productStatus`,
        `article`.`trade_method` AS `tradeMethod`,
        `article`.`blind_status` AS `blindStatus`,
        `user`.`nickname` AS `userNickname`,
        `user`.`level` AS `level`,
        `user`.`point` AS `point`,
        COUNT(`comment`.`index`) AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
        LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
        LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
        LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
        LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        WHERE `article`.`board_index` = #{boardIndex}
        AND `comment`.`content` LIKE CONCAT('%', #{keyword}, '%')
        <choose>
            <when test="alignment == 1">
                GROUP BY `article`.`index`
                ORDER BY `article`.`index`
            </when>
            <when test="alignment == 2">
                GROUP BY `article`.`index`
                ORDER BY `article`.`view`
            </when>
            <when test="alignment == 3">
                GROUP BY `article`.`index`
                ORDER BY `article`.`like`
            </when>
            <when test="alignment == 4">
                GROUP BY `article`.`index`
                ORDER BY `commentCount`
            </when>
        </choose>
        LIMIT #{count} OFFSET #{offset}
    </select>

    <select id="searchByNicknameAndAlignment"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto">
        SELECT `article`.`index` AS `index`,
        `article`.`user_index` AS `userIndex`,
        `article`.`board_index` AS `boardIndex`,
        `article`.`board_urlName` AS `boardUrlName`,
        `article`.`written_at` AS `writtenAt`,
        `article`.`title` AS `title`,
        `article`.`tag` AS `tag`,
        `article`.`url` AS `url`,
        `article`.`discount_code` AS `discountCode`,
        `article`.`shipping_info` AS `shippingInfo`,
        `article`.`order_date` AS `orderDate`,
        `article`.`shopping_mall` AS `shoppingMall`,
        `article`.`contact` AS `contact`,
        `article`.`brand` AS `brand`,
        `article`.`product_name` AS `productName`,
        `article`.`product_size` AS `productSize`,
        `article`.`my_size` AS `mySize`,
        `article`.`exchange_size` AS `exchangeSize`,
        `article`.`currency_for_product` AS `currencyForProduct`,
        `article`.`product_price` AS `productPrice`,
        `article`.`currency_for_purchasing` AS `currencyForPurchasing`,
        `article`.`purchase_product_price` AS `purchaseProductPrice`,
        `article`.`currency_for_sailing` AS `currencyForSailing`,
        `article`.`sale_product_price` AS `saleProductPrice`,
        `article`.`outer` AS `outer`,
        `article`.`top` AS `top`,
        `article`.`bottom` AS `bottom`,
        `article`.`shoes` AS `shoes`,
        `article`.`acc` AS `acc`,
        `article`.`content` AS `content`,
        `article`.`view` AS `view`,
        `article`.`like` AS `like`,
        `article`.`buy` AS `buy`,
        `article`.`category_index` AS `categoryIndex`,
        `article`.`gender` AS `gender`,
        `article`.`product_status` AS `productStatus`,
        `article`.`trade_method` AS `tradeMethod`,
        `article`.`blind_status` AS `blindStatus`,
        `user`.`nickname` AS `userNickname`,
        `user`.`level` AS `level`,
        `user`.`point` AS `point`,
        COUNT(`comment`.`index`) AS `commentCount`
        FROM `eomisae_article`.`articles` AS `article`
        LEFT JOIN `eomisae_member`.`users` AS `user` ON article.user_index = user.`index`
        LEFT JOIN `eomisae_comment`.`comments` AS `comment` ON article.`index` = comment.article_index
        LEFT JOIN `eomisae_article`.`categories` AS `category` ON article.category_index = category.`index`
        LEFT JOIN `eomisae_board`.`boards` AS `board` ON `article`.`board_urlName` = `board`.`urlName`
        WHERE `article`.`board_index` = #{boardIndex}
        AND `user`.`nickname` LIKE CONCAT('%', #{keyword}, '%')
        <choose>
            <when test="alignment == 1">
                GROUP BY `article`.`index`
                ORDER BY `article`.`index`
            </when>
            <when test="alignment == 2">
                GROUP BY `article`.`index`
                ORDER BY `article`.`view`
            </when>
            <when test="alignment == 3">
                GROUP BY `article`.`index`
                ORDER BY `article`.`like`
            </when>
            <when test="alignment == 4">
                GROUP BY `article`.`index`
                ORDER BY `commentCount`
            </when>
        </choose>
        LIMIT #{count} OFFSET #{offset}
    </select>

    <select id="selectBoardByUrlName"
            resultType="dev.dmchoi.eomisae.entities.bbs.BoardEntity">
        SELECT `index`         AS `index`,
               `id`            AS `id`,
               `name`          AS `name`,
               `urlName`       AS `urlName`,
               `list_level`    AS `listLevel`,
               `read_level`    AS `readLevel`,
               `write_level`   AS `writeLevel`,
               `comment_level` AS `commentLevel`
        FROM `eomisae_board`.`boards`
        WHERE `urlName` = #{urlName}
    </select>

    <select id="selectJoinComments"
            resultType="dev.dmchoi.eomisae.dtos.bbs.BoardReadCommentDto">
        SELECT `join_comment`.`index`        AS `index`,
               `join_comment`.`board_index`  AS `boardIndex`,
               `join_comment`.`user_index`   AS `userIndex`,
               `join_comment`.`written_at`   AS `writtenAt`,
               `join_comment`.`content`      AS `content`,
               `join_comment`.`parent_index` AS `parentIndex`,
               `join_comment`.`depth`        AS `depth`,
               `join_comment`.`like`         AS `like`,
               `join_comment`.`deleted_flag` AS `isDeleted`,
               `user`.`nickname`             AS `userNickname`
        FROM `eomisae_comment`.`join_comments` AS `join_comment`
                 LEFT JOIN `eomisae_member`.`users` AS `user` ON `join_comment`.`user_index` = `user`.`index`
                 LEFT JOIN `eomisae_board`.`boards` AS `board` ON `join_comment`.`board_index` = `board`.`index`
        WHERE `join_comment`.`board_index` = 9
        GROUP BY `join_comment`.`index`
        ORDER BY `join_comment`.`index` DESC
        LIMIT #{count} OFFSET #{offset}
    </select>

    <update id="updateArticleForBuy"
            parameterType="dev.dmchoi.eomisae.entities.bbs.ArticleEntity">
        UPDATE `eomisae_article`.`articles`
        SET `buy` = #{buy}
        WHERE `board_index` = #{bid}
          AND `index` = #{aid}
        LIMIT 1
    </update>

    <update id="updateArticleForView"
            parameterType="dev.dmchoi.eomisae.entities.bbs.ArticleEntity">
        UPDATE `eomisae_article`.`articles`
        SET `view` = #{view}
        WHERE `board_index` = #{bid}
          AND `index` = #{aid}
        LIMIT 1
    </update>

    <update id="updateArticleForLike"
            parameterType="dev.dmchoi.eomisae.entities.bbs.ArticleEntity">
        UPDATE `eomisae_article`.`articles`
        SET `like` = #{like}
        WHERE `board_index` = #{bid}
          AND `index` = #{aid}
        LIMIT 1
    </update>

    <update id="updateArticleForReport"
            parameterType="dev.dmchoi.eomisae.entities.bbs.ArticleEntity">
        UPDATE `eomisae_article`.`articles`
        SET `blind_status` = #{blindStatus}
        WHERE `board_index` = #{bid}
          AND `index` = #{aid}
        LIMIT 1
    </update>

    <update id="updateCommentForLike"
            parameterType="dev.dmchoi.eomisae.entities.bbs.CommentEntity">
        UPDATE `eomisae_comment`.`comments`
        SET `like` = #{like}
        WHERE `article_index` = #{aid}
          AND `index` = #{cid}
        LIMIT 1
    </update>

    <update id="updateCommentForReport"
            parameterType="dev.dmchoi.eomisae.entities.bbs.CommentEntity">
        UPDATE `eomisae_comment`.`comments`
        SET `blind_status` = #{blindStatus}
        WHERE `article_index` = #{aid}
          AND `index` = #{cid}
        LIMIT 1
    </update>

    <update id="updateJoinComment"
            parameterType="dev.dmchoi.eomisae.entities.bbs.JoinCommentEntity">
        UPDATE `eomisae_comment`.`join_comments`
        SET `like` = #{like}
        WHERE `index` = #{cid}
        LIMIT 1
    </update>

</mapper>