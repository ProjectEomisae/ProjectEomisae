<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<main id="main" th:with="isSearch = ${criteria != null && keyword != null}">
<!--/*@thymesVar id="articleReadVo" type="dev.dmchoi.eomisae.entities.bbs.ArticleEntity"*/-->
    <div class="nav-container">
        <div class="nav-menu">
            <ul class="list" th:if="${boardListVo.getId().equals('커뮤니티')}">
                <!--            <ul class="list" th:if="${#strings.equals(boardListVo.getId(), '커뮤니티')}">-->
                <li class="link" th:classappend="${#request.getRequestURI().contains('fe')} ? 'selected'">
                    <a th:href="@{/bbs/fe}">자유게시판</a>
                </li>
                <li class="link" th:classappend="${#request.getRequestURI().contains('fh')} ? 'selected'">
                    <a th:href="@{/bbs/fh}">패션게시판</a>
                </li>
                <li class="link" th:classappend="${#request.getRequestURI().contains('qa')} ? 'selected'">
                    <a th:href="@{/bbs/qa}">직구 Q&A</a>
                </li>
                <li class="link" th:classappend="${#request.getRequestURI().contains('chc')} ? 'selected'">
                    <a th:href="@{/bbs/chc}">코드:대리</a>
                </li>
                <li class="link" th:classappend="${#request.getRequestURI().contains('jp')} ? 'selected'">
                    <a th:href="@{/bbs/jp}">공동구매</a>
                </li>
                <li class="link" th:classappend="${#request.getRequestURI().contains('ui')} ? 'selected'">
                    <a th:href="@{/bbs/ui}">가입인사</a>
                </li>
            </ul>
            <ul class="list" th:if="${boardListVo.getId().equals('운영관리')}">
                <!--            <ul class="list" th:if="${#strings.equals(boardListVo.getId(), '운영관리')}">-->
                <li class="link" th:classappend="${#request.getRequestURI().contains('no')} ? 'selected'">
                    <a th:href="@{/bbs/no}">공지사항</a>
                </li>
                <li class="link" th:classappend="${#request.getRequestURI().contains('ev')} ? 'selected'">
                    <a th:href="@{/bbs/ev}">이벤트</a>
                </li>
                <li class="link" th:classappend="${#request.getRequestURI().contains('mail')} ? 'selected'">
                    <a th:href="@{/bbs/mail}">건의</a>
                </li>
            </ul>
        </div>
    </div>
    <div class="main-container">
        <section class="main-section">
            <div class="empty-container">
                <span></span>
            </div>
            <div class="title-container"
                 th:if="${!boardListVo.getId().equals('운영관리')}">
                <div class="title-section">
                    <h3 class="title">
                        <a th:href="@{'/bbs/' + ${boardListVo.getUrlName()}}">
                            <span th:text="${boardListVo.getName()}"></span>
                        </a>
                    </h3>
                    <h5 class="sub-title"
                        th:if="${boardListVo.getUrlName().contains('fe')}">
                        패션 관련 주제는 패션게시판, 직구 질문은 직구Q&A 게시판에 남겨주세요.
                    </h5>
                    <h5 class="sub-title" th:if="${boardListVo.getUrlName().contains('fh')}"></h5>
                    <h5 class="sub-title"
                        th:if="${boardListVo.getUrlName().contains('qa')}">
                        직구와 관련된 질문과 답변을 주고 받는 게시판입니다
                        도움을 받았다면 답변 채택으로 고마운 마음을 표현해 주세요
                    </h5>
                    <h5 class="sub-title"
                        th:if="${boardListVo.getUrlName().contains('chc')}">
                        할인코드를 요청, 나눔하는 게시판입니다.
                    </h5>
                    <h5 class="sub-title"
                        th:if="${boardListVo.getUrlName().contains('jp')}">
                        공동구매는 배송비 절약, 할인 구입 등 개인의 비용 절감이 목적입니다
                    </h5>
                    <h5 class="sub-title"
                        th:if="${boardListVo.getUrlName().contains('al')}">
                        사이트 전체 글을 모아 볼 수 있는 게시판으로 글 작성이 불가능 합니다.<br>
                        해당 게시판에서 글 작성 해주세요
                    </h5>
                </div>
            </div>
            <div class="menu-container">
                <div class="menu-section">
                    <div class="left">
                        <div class="category">
                            <a class="link" rel="link"
                            th:classappend="${#request.getParameter('category')}">
                                분류
                                <i class="fa-solid fa-angle-down"></i>
                            </a>
                            <ul class="category-list">
                                <li class="list">
                                    <a class="link" th:href="@{${boardListVo.getUrlName()} (category=0)}">
                                        전체
                                    </a>
                                </li>
                                <li class="list"
                                    th:if="${!isSearch && !boardListVo.getUrlName().contains('al')}">
                                    <!--                                    <a class="link" th:href="@{${boardListVo.getUrlName()} (category=${category.getIndex()} ,criteria = ${criteria}, keyword = ${keyword})}"-->
                                    <a class="link" th:href="@{${boardListVo.getUrlName()} (criteria = ${criteria}, keyword = ${keyword}, category=${category.getIndex()})}"
                                       th:each="category : ${categoryEntities}"
                                       th:text="${category.getName()}"
                                       th:if="${boardListVo.getIndex() == category.getBoardIndex()}">
                                        잡담
                                        <span>(158819)</span>
                                    </a>
                                </li>
                                <li class="list"
                                    th:if="${isSearch && !boardListVo.getUrlName().contains('al')}">
                                     <!--                                    <a class="link" th:href="@{${boardListVo.getUrlName()} (category=${category.getIndex()} ,criteria = ${criteria}, keyword = ${keyword})}"-->
                                    <a class="link" th:href="@{${boardListVo.getUrlName()} (criteria = ${criteria}, keyword = ${keyword}, category=${category.getIndex()})}"
                                       th:each="category : ${categoryEntities}"
                                       th:text="${category.getName()}"
                                       th:if="${boardListVo.getIndex() == category.getBoardIndex()}">
                                        잡담
                                        <span>(158819)</span>
                                    </a>
                                </li>
                                <li class="list"
                                    th:if="${!isSearch && boardListVo.getUrlName().contains('al')}">
                                    <!--                                    <a class="link" th:href="@{${boardListVo.getUrlName()} (category=${category.getIndex()} ,criteria = ${criteria}, keyword = ${keyword})}"-->
                                    <a class="link" th:href="@{${boardListVo.getUrlName()} (criteria = ${criteria}, keyword = ${keyword}, category=${category.getIndex()})}"
                                       th:each="category : ${categoryEntities}"
                                       th:text="${category.getName()}">
                                        잡담
                                        <span>(158819)</span>
                                    </a>
                                </li>
                                <li class="list"
                                    th:if="${isSearch && boardListVo.getUrlName().contains('al')}">
                                    <!--                                    <a class="link" th:href="@{${boardListVo.getUrlName()} (category=${category.getIndex()} ,criteria = ${criteria}, keyword = ${keyword})}"-->
                                    <a class="link" th:href="@{${boardListVo.getUrlName()} (criteria = ${criteria}, keyword = ${keyword}, category=${category.getIndex()})}"
                                       th:each="category : ${categoryEntities}"
                                       th:text="${category.getName()}">
                                        잡담
                                        <span>(158819)</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <div class="align">
                            <a class="link">
                                정렬
                                <i class="fa-solid fa-angle-down"></i>
                            </a>
                            <ul class="align-list">
                                <li class="list">
                                    <a class="link" th:href="@{${boardListVo.getUrlName()} (criteria = ${criteria}, keyword = ${keyword}, alignment=${1})}">
                                        최신순
                                    </a>
                                </li>
                                <li class="list">
                                    <a class="link" th:href="@{${boardListVo.getUrlName()} (criteria = ${criteria}, keyword = ${keyword}, alignment=${2})}">
                                        조회순
                                    </a>
                                </li>
                                <li class="list">
                                    <a class="link" th:href="@{${boardListVo.getUrlName()} (criteria = ${criteria}, keyword = ${keyword}, alignment=${3})}">
                                        추천순
                                    </a>
                                </li>
                                <li class="list">
                                    <a class="link" th:href="@{${boardListVo.getUrlName()} (criteria = ${criteria}, keyword = ${keyword}, alignment=${4})}">
                                        댓글순
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="right">
                        <div class="function">
                            <a class="link write" th:href="@{'/bbs/' + ${boardListVo.getUrlName() + '/add'}}" th:classappend="${#request.getAttribute('user') != null && #request.getAttribute('user').getLevel() >= boardListVo.getWriteLevel()} ? 'on'">
                                쓰기
                            </a>
                            <a class="link search">
                                검색
                            </a>
                            <a class="link" th:href="@{/static}">
                                목록
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="search-container">
                <form class="search-form" method="get">
                    <select class="criteria" name="criteria">
                        <span hidden>검색 기준</span>
                        <option value="title-content" th:selected="${criteria == null || !criteria.equals('title-content')}">제목+내용</option>
                        <option value="title" th:selected="${criteria != null && criteria.equals('title')}">제목</option>
                        <option value="content" th:selected="${criteria != null && criteria.equals('content')}">내용</option>
                        <option value="comment" th:selected="${criteria != null && criteria.equals('comment')}">댓글</option>
                        <option value="nickname" th:selected="${criteria != null && criteria.equals('nickname')}">닉네임</option>
                        <option value="tag" th:selected="${criteria != null && criteria.equals('tag')}">태그</option>
                        <option value="link" th:selected="${criteria != null && criteria.equals('link')}">링크</option>
                    </select>
                    <label>
                        <span hidden class="hint">검색어</span>
                        <input class="keyword" type="text" th:value="${keyword}" name="keyword" placeholder="검색어를 입력하세요.">
                        <input hidden th:value="${category}" name="category">
                        <input hidden th:value="${alignment}" name="alignment">
                        <input hidden type="submit">
                    </label>
                </form>
            </div>
            <div class="article-container">
                <div class="article-section">
                    <table>
                        <thead>
                        <tr>
                            <th class="no">번호</th>
                            <th class="title">제목</th>
                            <th class="name">글쓴이</th>
                            <th class="date">날짜</th>
                            <th class="view">조회 수</th>
                            <th class="like">
                                <span>추천 수</span>
                            </th>
                        </tr>
                        </thead>
                        <tbody>
                        <th:block th:replace="~{bbs/fragments/board-no.html :: board-no}"></th:block>
                        <tr th:if="${boardListVo.getArticles().size() == 0}"> <!-- 조건하에 표시되는 요소 -->
                            <td colspan="6" style="padding: 20px 0; text-align: center;">표시할 게시글이 없습니다.</td>
                        </tr>
                        <tr class="user"
                            th:each="article : ${boardListVo.getArticles()}" th:object="${article}">
                            <td>
                                <span th:text="${article.getIndex()}">171585</span>
                            </td>
                            <td class="title">
                                <span>
                                <img alt="•" th:src="@{/bbs/resources/images/1x1.png}"
                                     th:each="category : ${categoryEntities}"
                                     th:text="${category.getName()}"
                                     th:if="${article.getCategoryIndex() == category.getIndex()}"></span>
                                <a th:href="@{'/bbs/' + ${article.getBoardUrlName()} + '/'+ ${article.getIndex()}}" th:text="${article.getTitle()}">세일정보 게시판 규정 (21.11.29추가)세일정보 게시판 규정
                                    (21.11.29추가)세일정보 게시판 규정
                                    (21.11.29추가)</a>
                                <a class="comments" th:href="@{'/bbs/' + ${article.getBoardUrlName()} + '/'+ ${article.getIndex()}}" th:text="${article.getCommentCount()}">137</a>
                                <span class="extra-images">
                                    <img alt="최신글"
                                         th:if="${T(org.apache.commons.lang3.time.DateUtils).addDays(#dates.createNow(), -3) < article.getWrittenAt()}"
                                         th:src="@{/bbs/resources/images/new.gif}">
                                <img alt="이미지" th:src="@{/bbs/resources/images/file.gif}"
                                     th:if="${article.getContent().contains('download-image')}">
                            </span>
                            </td>
                            <td class="user box">
                                <div class="user-name">
                                    <img th:if="${article.getProfileId() != null && article.getProfileId() != ''}"
                                         th:src="@{'/user/profile-id?id=' + ${article.getProfileId()}}">
                                    <img alt="프로필 이미지"
                                         th:if="${article.getProfileId() == null || article.getProfileId() == ''}"
                                         th:src="@{/resources/images/profile.png}">
                                    <span th:text="${article.getUserNickname()}">어미새</span>
                                </div>
                                <div class="user-info">
                                    <ul class="user-menu">
                                        <li class="list">
                                            <a class="link" th:href="@{/static}"
                                               th:text="${'Lv.' + article.getLevel() + ' (' + (article.getPoint() * 100) / 3000 + '%)'}">Lv.14 (91.6%)</a>
                                        </li>
                                        <li class="list">
                                            <a class="link my-page" th:href="@{/user/my-page/memberOwnDocument}" th:classappend="${#request.getAttribute('user') != null && article.getUserIndex() == #request.getAttribute('user').getIndex()} ? 'on'">활동 내역 보기</a>
                                        </li>
                                        <li class="list" th:if="${#request.getAttribute('user') != null && article.getUserIndex() != #request.getAttribute('user').getIndex()}">
                                            <a class="link" th:href="@{/}">쪽지 보내기</a>
                                        </li>
                                        <li class="list">
                                            <a class="link" th:href="@{/static}">회원 차단</a>
                                        </li>
                                    </ul>
                                </div>
                            </td>
                            <td th:text="${#dates.format(article.getWrittenAt(), 'MM.dd')}"></td>
                            <td th:text="${article.getView()}">152910</td>
                            <td th:text="${article.getLike()}">20</td>
                        </tr>
                        <tr class="no-comment" th:if="${paging.requestPage == 1 && (boardListVo.getUrlName.contains('al') || boardListVo.getUrlName.contains('fe'))}">
                            <td colspan="6">
                                답변을 받지 못한 질문 글입니다.
                            </td>
                        </tr>
                        <tr th:if="${boardListVo.getArticles().size() == 0 && (boardListVo.getUrlName.contains('al') || boardListVo.getUrlName.contains('fe'))}"> <!-- 조건하에 표시되는 요소 -->
                            <td colspan="6" style="padding: 20px 0; text-align: center;">표시할 게시글이 없습니다.</td>
                        </tr>
                        <!--/*@thymesVar id="article" type="dev.dmchoi.eomisae.dtos.bbs.BoardListArticleDto"*/-->
                        <tr class="user" th:each="article, index : ${boardListVo.getArticles()}"
                        th:if="${article.getCommentCount() == 0 && index.index < 3 + (article.getCommentCount() != 0 ? 0 : 3) && paging.requestPage == 1 && (boardListVo.getUrlName.contains('al') || boardListVo.getUrlName.contains('fe'))}"
                            th:with="num=${1}">
                            <td>
                                <span th:text="${article.getIndex()}">171585</span>
                            </td>
                            <td class="title">
                                <span>
                                <img alt="•" th:src="@{/bbs/resources/images/1x1.png}"
                                     th:each="category : ${categoryEntities}"
                                     th:text="${category.getName()}"
                                     th:if="${article.getCategoryIndex() == category.getIndex()}"> </span>
                                <a th:href="@{'/bbs/' + ${article.getBoardUrlName()} + '/'+ ${article.getIndex()}}" th:text="${article.getTitle()}">세일정보 게시판 규정 (21.11.29추가)세일정보 게시판 규정
                                    (21.11.29추가)세일정보 게시판 규정
                                    (21.11.29추가)</a>
                                <a class="comments" th:href="@{'/bbs/' + ${article.getBoardUrlName()} + '/'+ ${article.getIndex()}}" th:text="${article.getCommentCount()}">137</a>
                                <span class="extra-images">
                                    <img alt="최신글"
                                         th:if="${T(org.apache.commons.lang3.time.DateUtils).addDays(#dates.createNow(), -3) < article.getWrittenAt()}"
                                         th:src="@{/bbs/resources/images/new.gif}">
                                <img alt="이미지" th:src="@{/bbs/resources/images/file.gif}"
                                     th:if="${article.getContent().contains('download-image')}">
                            </span>
                            </td>
                            <td class="user box">
                                <div class="user-name">
                                    <img th:if="${article.getProfileId() != null && article.getProfileId() != ''}"
                                         th:src="@{'/user/profile-id?id=' + ${article.getProfileId()}}">
                                    <img alt="프로필 이미지"
                                         th:if="${article.getProfileId() == null || article.getProfileId() == ''}"
                                         th:src="@{/resources/images/profile.png}">
                                    <span th:text="${article.getUserNickname()}">어미새</span>
                                </div>
                                <div class="user-info">
                                    <ul class="user-menu">
                                        <li class="list">
                                            <a class="link" th:href="@{/static}"
                                               th:text="${'Lv.' + article.getLevel() + ' (' + (article.getPoint() * 100) / 3000 + '%)'}">Lv.14 (91.6%)</a>
                                        </li>
                                        <li class="list">
                                            <a class="link my-page" th:href="@{/user/my-page/memberOwnDocument}" th:classappend="${#request.getAttribute('user') != null && article.getUserIndex() == #request.getAttribute('user').getIndex()} ? 'on'">활동 내역 보기</a>
                                        </li>
                                        <li class="list" th:if="${#request.getAttribute('user') != null && article.getUserIndex() != #request.getAttribute('user').getIndex()}">
                                            <a class="link" th:href="@{/}">쪽지 보내기</a>
                                        </li>
                                        <li class="list">
                                            <a class="link" th:href="@{/static}">회원 차단</a>
                                        </li>
                                    </ul>
                                </div>
                            </td>
                            <td th:text="${#dates.format(article.getWrittenAt(), 'MM.dd')}"></td>
                            <td th:text="${article.getView()}">152910</td>
                            <td th:text="${article.getLike()}">20</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="empty-container down">
                <span></span>
            </div>
            <table>
                <tbody>
                <tr>
                    <td>
                        <div class="page-container">
                            <div class="page-section" th:if="${!isSearch}">
                                <a th:href="@{'./' + ${boardListVo.getUrlName()} (page=${paging.requestPage - 1})}"
                                   th:if="${paging.minPage < paging.requestPage}">
                                    <i class="fa-solid fa-angle-left"></i>
                                </a>
                                <a th:href="@{'./' + ${boardListVo.getUrlName()} (page=${paging.minPage})}"
                                   th:text="${paging.minPage}"
                                   th:if="${paging.requestPage > 7}">
                                </a>
                                <span th:if="${paging.requestPage > 7}">-</span>
                                <a th:href="@{'./' + ${boardListVo.getUrlName()} (page=${page})}"
                                   th:each="page : ${#numbers.sequence(paging.boundStartPage, paging.requestPage - 1)}"
                                   th:text="${page}"
                                   th:if="${paging.requestPage > paging.boundStartPage}">
                                </a>
                                <a th:text="${paging.requestPage}"
                                   th:classappend="${paging.requestPage} ? 'selected'">
                                </a>
                                <a th:href="@{'./' + ${boardListVo.getUrlName()} (page=${page})}"
                                   th:each="page : ${#numbers.sequence(paging.requestPage + 1, paging.boundEndPage - 1)}"
                                   th:text="${page}"
                                   th:if="${paging.requestPage < paging.boundEndPage && paging.boundEndPage > page && page != paging.requestPage }">
                                </a>
                                <span th:if="${paging.requestPage != paging.maxPage}">-</span>
                                <a th:href="@{'./' + ${boardListVo.getUrlName()} (page=${paging.maxPage})} "
                                   th:text="${paging.maxPage}"
                                   th:if="${paging.requestPage != paging.maxPage}">
                                </a>
                                <a th:href="@{'./' + ${boardListVo.getUrlName()} (page=${paging.requestPage + 1})}"
                                   th:if="${paging.maxPage > paging.requestPage}">
                                    <i class="fa-solid fa-angle-right"></i>
                                </a>
                            </div>
                            <div class="page-section" th:if="${isSearch}">
                                <a th:href="@{'./' + ${boardListVo.getUrlName()} (page=${paging.requestPage - 1}, criteria = ${criteria}, keyword = ${keyword}, category=${category}, alignment=${alignment})}"
                                   th:if="${paging.minPage < paging.requestPage}">
                                    <i class="fa-solid fa-angle-left"></i>
                                </a>
                                <a th:href="@{'./' + ${boardListVo.getUrlName()} (page=${paging.minPage}, criteria = ${criteria}, keyword = ${keyword}, category=${category}, alignment=${alignment})}"
                                   th:text="${paging.minPage}"
                                   th:if="${paging.requestPage > 7}">
                                </a>
                                <span th:if="${paging.requestPage > 7}">-</span>
                                <a th:href="@{'./' + ${boardListVo.getUrlName()} (page=${page}, criteria = ${criteria}, keyword = ${keyword}, category=${category}, alignment=${alignment})}"
                                   th:each="page : ${#numbers.sequence(paging.boundStartPage, paging.requestPage - 1)}"
                                   th:text="${page}"
                                   th:if="${paging.requestPage > paging.boundStartPage}">
                                </a>
                                <a th:text="${paging.requestPage}"
                                   th:classappend="${paging.requestPage} ? 'selected'">
                                </a>
                                <a th:href="@{'./' + ${boardListVo.getUrlName()} (page=${page}, criteria = ${criteria}, keyword = ${keyword}, category=${category}, alignment=${alignment})}"
                                   th:each="page : ${#numbers.sequence(paging.requestPage + 1, paging.boundEndPage - 1)}"
                                   th:text="${page}"
                                   th:if="${paging.requestPage < paging.boundEndPage && paging.boundEndPage > page && page != paging.requestPage }">
                                </a>
                                <span th:if="${paging.requestPage != paging.maxPage}">-</span>
                                <a th:href="@{'./' + ${boardListVo.getUrlName()} (page=${paging.maxPage}, criteria = ${criteria}, keyword = ${keyword}, category=${category}, alignment=${alignment})}"
                                   th:text="${paging.maxPage}"
                                   th:if="${paging.requestPage != paging.maxPage}">
                                </a>
                                <a th:href="@{'./' + ${boardListVo.getUrlName()} (page=${paging.requestPage + 1}, criteria = ${criteria}, keyword = ${keyword}, category=${category}, alignment=${alignment})}"
                                   th:if="${paging.maxPage > paging.requestPage}">
                                    <i class="fa-solid fa-angle-right"></i>
                                </a>
                            </div>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </section>
        <th:block th:replace="~{bbs/fragments/side-section.html :: side-section}"></th:block>
    </div>
</main>